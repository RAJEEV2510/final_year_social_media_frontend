{"version":3,"sources":["components/placeholders/post-placeholder.jsx","components/posts/feed.js","components/posts/post-form/get-location.js","components/posts/post-form/post-image.jsx","components/posts/post-form.js","components/posts/posts.js","shared/hooks/http-hook.js","shared/models/post-model.js","components/posts/image-preview.jsx","components/posts/post-item.js"],"names":["PostPlaceholder","className","RenderPosts","React","memo","Posts","token","uid","img","username","useFetch","request","error","loading","posts","useSelector","state","dispatch","useDispatch","handlePosts","a","process","length","responseData","type","payload","data","console","log","useEffect","document","title","dataLength","next","hasMore","loader","endMessage","style","textAlign","map","post","_id","GetLocation","handleLocation","location","useState","setError","setLoading","clearError","useCallback","geolocationSuccess","pos","coords","latitude","longitude","url","axios","get","then","response","city_name","catch","message","geolocationFaliur","err","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","getErrorCode","window","addEventListener","removeEventListener","closeModal","onClick","navigator","geolocation","getCurrentPosition","width","height","fill","PostImage","previewUrl","removeImage","setImgData","crop","setCrop","CropperRef","useRef","e","stopPropagation","ref","src","zoomable","aspectRatio","viewMode","responsive","guides","current","cropper","getData","alt","PostForm","user","setTitle","setLocation","filePickerRef","setPreviewUrl","files","setFiles","imgData","idx","createPost","formData","FormData","append","x","y","creator","Authorization","newPost","createdAt","Date","toISOString","id","isOnline","fileReader","FileReader","onload","result","readAsDataURL","onSubmit","preventDefault","value","name","onChange","target","placeholder","click","display","accept","event","pickedFile","handleChange","el","top","left","city","disabled","currentUser","video","setVideoData","fetch","json","dots","infinite","speed","slidesToShow","slidesToScroll","index","videoUrl","postedByUrl","snapshotAt","useHttpClient","isLoading","setIsLoading","activeHttpRequests","sendRequest","method","body","headers","httpAbortCtrl","AbortController","push","signal","filter","reqCtrl","ok","Error","forEach","abortCtrl","abort","PostModel","path","children","isOpen","setIsOpen","isSignedIn","overflowY","deletePost","history","CSSTransition","in","timeout","classNames","unmountOnExit","to","pathname","LightboxImages","props","this","image","closeLightBox","mainSrc","onCloseRequest","Component","PostItem","liked","indexOf","setLiked","nol","test","handleLike","JSON","stringify","postId","like","socket","emit","timer","setTimeout","clearTimeout","comments","oldTime","now","leftTime","getTime","leftHours","t","Math","ceil","floor","getLeftTime"],"mappings":"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","file":"static/js/11.edcf718b.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst PostPlaceholder = ()=>{\r\n\treturn <div className=\"post-placeholder\">\r\n       <div className=\"post-placeholder__header\">\r\n           <div className=\"post-placeholder__img\"></div> \r\n           <div className=\"post-placeholder__info\">\r\n           <div className=\"post-placeholder__username\"></div> \r\n            <div className=\"post-placeholder__name\"></div> \r\n          </div>\r\n       </div>\r\n       <div className=\"post-placeholder__content\">\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n       </div>\r\n       <div className=\"post-placeholder__tail\">\r\n       <div className=\"post-placeholder__like\"></div>\r\n       <div className=\"post-placeholder__time\"></div>\r\n       </div>\r\n\t</div>\r\n}\r\nexport default PostPlaceholder;","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport PostItem from \"./post-item\";\r\nimport Loading from \"../../shared/loading\";\r\nimport { useFetch } from \"../../shared/hooks/useFetch\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport PostPlaceholer from \"../placeholders/post-placeholder\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst style = {\r\n  height: 30,\r\n  border: \"1px solid green\",\r\n  margin: 6,\r\n  padding: 8,\r\n  color: \"#fff\",\r\n};\r\n\r\nconst RenderPosts = React.memo(({ token, uid, img, username }) => {\r\n  const { request, loading, error } = useFetch();\r\n  const posts = useSelector((state) => state.posts);\r\n  const dispatch = useDispatch();\r\n  const handlePosts = async () => {\r\n    try {\r\n      const responseData = await request(\r\n        process.env.REACT_APP_BACKEND_URL + `/posts?skip=${posts.posts.length}`\r\n      );\r\n      dispatch({\r\n        type: \"FETCH_POSTS\",\r\n        payload: {\r\n          posts: responseData.data.posts,\r\n          length: responseData.data.length,\r\n        },\r\n      });\r\n    } catch (err) {\r\n      console.log(err, error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (!posts.posts.length) handlePosts();\r\n    document.title=\"Leechi\"\r\n  }, []);\r\n  let Posts;\r\n  if (posts.posts && posts.posts.length) {\r\n    Posts = (\r\n      <InfiniteScroll\r\n        dataLength={posts.length}\r\n        next={handlePosts}\r\n        hasMore={posts.posts.length < posts.length}\r\n        loader={\r\n          <div>\r\n            <PostPlaceholer />\r\n            <PostPlaceholer />\r\n          </div>\r\n        }\r\n        endMessage={\r\n          <p style={{ textAlign: \"center\" }} className=\"no-more\">\r\n            <b>Yay! You have seen it all</b>\r\n          </p>\r\n        }\r\n      >\r\n        {posts.posts.map((post) => {\r\n          return (\r\n            <PostItem\r\n              key={post._id}\r\n              img={img}\r\n              username={username}\r\n              uid={uid}\r\n              token={token}\r\n              post={post}\r\n            />\r\n          );\r\n        })}\r\n        ;\r\n      </InfiniteScroll>\r\n    );\r\n  } else if (error) {\r\n    Posts = <h1>{error} please try again later.</h1>;\r\n  } else\r\n    Posts = (\r\n      <div>\r\n        <PostPlaceholer />\r\n        <PostPlaceholer />\r\n        <PostPlaceholer />\r\n      </div>\r\n    );\r\n  return <div>{Posts}</div>;\r\n});\r\nexport default RenderPosts;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Map } from \"../../../assets/icons/icons.js\";\r\nimport ErrorModal from \"../../../shared/models/error-model\";\r\nimport LoadingModal from \"../../../shared/models/loading-modal\";\r\n\r\nconst GetLocation = React.memo(({ handleLocation, location }) => {\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const clearError = useCallback(() => {\r\n    setError(null);\r\n  }, []);\r\n\r\n  const geolocationSuccess = (pos) => {\r\n    setLoading(true);\r\n    const { latitude, longitude } = pos.coords;\r\n    const url =\r\n      `https://api.weatherbit.io/v2.0/current?lat=${latitude}&lon=${longitude}&key=` +\r\n     \"1f701621ea254a1cb3113097e5971fe4\";\r\n    axios\r\n      .get(url)\r\n      .then(function (response) {\r\n        handleLocation(response.data.data[0].city_name);\r\n      })\r\n      .catch(function (error) {\r\n        setError(error.message);\r\n      });\r\n    setLoading(false);\r\n  };\r\n  const getErrorCode = (err) => {\r\n    switch (err.code) {\r\n      case err.PERMISSION_DENIED:\r\n        return \"You have to make location allow first!\";\r\n      case err.POSITION_UNAVAILABLE:\r\n        return \"POSITION_UNAVAILABLE\";\r\n      case err.TIMEOUT:\r\n        return \"TIMEOUT\";\r\n      default:\r\n        return \"UNKNOWN_ERROR\";\r\n    }\r\n  };\r\n  const geolocationFaliur = (err) => {\r\n    setError(getErrorCode(err));\r\n    setLoading(false);\r\n  };\r\n  const currentLocation = () => {\r\n    if (navigator.geolocation) {\r\n      setLoading(true);\r\n      navigator.geolocation.getCurrentPosition(\r\n        geolocationSuccess,\r\n        geolocationFaliur\r\n      );\r\n    } else {\r\n      console.log(\"your browser dosnot support geolocation\");\r\n    }\r\n  };\r\n\r\n  const cancleLocation = () => {\r\n    handleLocation(null);\r\n  };\r\n  useEffect(() => {\r\n    window.addEventListener(\"click\", clearError);\r\n    return () => window.removeEventListener(\"click\", clearError);\r\n  }, [clearError]);\r\n  return (\r\n    <>\r\n      {loading && <LoadingModal />}\r\n      {error && (\r\n        <ErrorModal state=\"error\" closeModal={clearError} message={error} />\r\n      )}\r\n      <span\r\n        className=\"icon\"\r\n        onClick={location ? cancleLocation : currentLocation}\r\n      >\r\n        <Map\r\n          width=\"2.2rem\"\r\n          height=\"2.4rem\"\r\n          fill={location ? \"#1D8CF8\" : \"#8B8B85\"}\r\n        />\r\n      </span>\r\n    </>\r\n  );\r\n});\r\nexport default GetLocation;\r\n","import React, { useState, useRef } from \"react\";\r\nimport Cropper from \"react-cropper\";\r\nimport \"cropperjs/dist/cropper.css\";\r\nimport Zoom from \"react-reveal/Zoom\";\r\nimport { Crop, Close } from \"../../../assets/icons/icons\";\r\n\r\nconst PostImage = React.memo(({ previewUrl, removeImage, setImgData }) => {\r\n  const [crop, setCrop] = useState(null);\r\n  const CropperRef = useRef(0);\r\n\r\n  return (\r\n    <div>\r\n      {crop && (\r\n        <div className=\"modal__container\">\r\n          <div className=\"modal\">\r\n            <div\r\n              className=\"modal__body cropper\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <Cropper\r\n                ref={CropperRef}\r\n                src={previewUrl}\r\n                style={{ height: \"80vh\", width: \"100%\" }}\r\n                // Cropper.js options\r\n                zoomable={false}\r\n                aspectRatio={1}\r\n                viewMode={2}\r\n                responsive={true}\r\n                guides={false}\r\n              />\r\n              <div className=\"modal__footer\">\r\n                <button\r\n                  className=\"btn btn--outlined-danger\"\r\n                  onClick={() => setCrop(false)}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  className=\"btn btn--contained-success\"\r\n                  onClick={() => {\r\n                    setCrop(null);\r\n                    setImgData(CropperRef.current.cropper.getData());\r\n                  }}\r\n                >\r\n                  Submit\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {previewUrl ? (\r\n        <div className=\"form__images--container\">\r\n          <div className=\"form__images--row\">\r\n            <div>\r\n              <Zoom>\r\n                <div className=\"img\">\r\n                  <img src={previewUrl} alt=\"aa\" />\r\n                </div>\r\n              </Zoom>\r\n            </div>\r\n            <div className=\"form__images--options\">\r\n              <span className=\"icon del\" onClick={removeImage}>\r\n                <Close width=\"2.2rem\" height=\"2.2rem\" fill=\"#fff\" />\r\n              </span>\r\n              <span\r\n                className=\"icon crop\"\r\n                onClick={() => {\r\n                  setCrop(true);\r\n                }}\r\n              >\r\n                <Crop width=\"2.2rem\" height=\"2.2rem\" fill=\"#fff\" />\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n});\r\nexport default PostImage;\r\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\r\nimport { Camera, Delete } from \"../../assets/icons/icons.js\";\r\nimport GetLocation from \"./post-form/get-location\";\r\nimport EmojyPicker from \"./post-form/emojy-picker\";\r\nimport ErrorModal from \"../../shared/models/error-model\";\r\nimport LoadingPage from \"../../shared/models/loading-modal\";\r\nimport { useFetch } from \"../../shared/hooks/useFetch\";\r\nimport PostImage from \"./post-form/post-image\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst PostForm = React.memo(({ user }) => {\r\n  const { loading, request, error, clearError } = useFetch();\r\n  const [title, setTitle] = useState(\"\");\r\n  const [location, setLocation] = useState(null);\r\n  const dispatch = useDispatch();\r\n  const filePickerRef = useRef();\r\n  const [previewUrl, setPreviewUrl] = useState();\r\n  const [files, setFiles] = useState();\r\n  const [imgData, setImgData] = useState();\r\n\r\n  const pickedHandler = (event) => {\r\n    let pickedFile;\r\n    if (event.target.files && event.target.files.length === 1) {\r\n      pickedFile = event.target.files[0];\r\n      setFiles(pickedFile);\r\n    }\r\n  };\r\n  const removeImage = (idx) => {\r\n    setFiles(null);\r\n    setPreviewUrl(null);\r\n  };\r\n  const pickImageHandler = () => {\r\n    filePickerRef.current.click();\r\n  };\r\n  const createPost = async (data) => {\r\n    try {\r\n      const formData = new FormData();\r\n      if (imgData && imgData.width) {\r\n        formData.append(\"x\", imgData.x);\r\n        formData.append(\"y\", imgData.y);\r\n        formData.append(\"width\", imgData.width);\r\n        formData.append(\"height\", imgData.height);\r\n      }\r\n      formData.append(\"title\", data.title);\r\n      formData.append(\"location\", data.location);\r\n      formData.append(\"img\", data.img);\r\n      formData.append(\"creator\", data.creator);\r\n      const responseData = await request(\r\n        process.env.REACT_APP_BACKEND_URL + \"/posts\",\r\n        \"post\",\r\n        formData,\r\n        {\r\n          Authorization: \"Bearer \" + user.token,\r\n        }\r\n      );\r\n      const newPost = {\r\n        createdAt: new Date().toISOString(),\r\n        username: user.username,\r\n        img: user.img,\r\n        _id: user.id,\r\n        isOnline: true,\r\n      };\r\n      dispatch({\r\n        type: \"CREATE_POST\",\r\n        payload: {\r\n          ...responseData.data.post,\r\n          creator: newPost,\r\n        },\r\n      });\r\n      dispatch({\r\n        type: \"ONE_MORE_POST\",\r\n        payload: {\r\n          ...responseData.data.post,\r\n          creator: newPost,\r\n        },\r\n      });\r\n      removeImage();\r\n      setTitle(\"\");\r\n      setLocation(null);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const handleChange = (e) => {\r\n    setTitle(e.target.value);\r\n  };\r\n  const addEmojy = (e) => {\r\n    setTitle((el) => el + e);\r\n  };\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    createPost({ title, img: files, location, creator: user.id });\r\n  };\r\n  const setCropData = (data) => {\r\n    setImgData({ ...data });\r\n  };\r\n  useEffect(() => {\r\n    if (!files) {\r\n      return;\r\n    }\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      setPreviewUrl(fileReader.result);\r\n    };\r\n    fileReader.readAsDataURL(files);\r\n  }, [files]);\r\n\r\n  return (\r\n    <div className=\"form__container\">\r\n      {loading && <LoadingPage />}\r\n      {error && (\r\n        <ErrorModal state=\"error\" closeModal={clearError} message={error} />\r\n      )}\r\n      <div className=\"divider\" />\r\n      <div className=\"form__heading\">\r\n        <h3>Write a post</h3>\r\n      </div>\r\n      <div className=\"form\">\r\n        <form className=\"form__body big\" onSubmit={handleSubmit}>\r\n          <div className=\"form__user\">\r\n            <div className=\"form__user--img\">\r\n              <img src={user.img} alt=\"aa\" />\r\n            </div>\r\n            <div className=\"form__user--username\">\r\n              <h3>{user.username}</h3>\r\n              {location && <span>{location}</span>}\r\n            </div>\r\n          </div>\r\n          <div className=\"form__unit my-2\">\r\n            <div className=\"form__unit features\">\r\n              <textarea\r\n                value={title}\r\n                name=\"body\"\r\n                onChange={handleChange}\r\n                placeholder=\"what in your mind..?\"\r\n              ></textarea>\r\n              <PostImage\r\n                previewUrl={previewUrl}\r\n                removeImage={removeImage}\r\n                setImgData={setCropData}\r\n              />\r\n              <div className=\"features__icons\">\r\n                <div className=\"features__icons--body\">\r\n                  <span className=\"icon\" onClick={pickImageHandler}>\r\n                    <input\r\n                      ref={filePickerRef}\r\n                      style={{ display: \"none\" }}\r\n                      type=\"file\"\r\n                      accept=\".png,.jpg,.jpeg\"\r\n                      onChange={pickedHandler}\r\n                    />\r\n                    <Camera\r\n                      width=\"2.2rem\"\r\n                      height=\"2.4rem\"\r\n                      fill={previewUrl ? \"#1D8CF8\" : \"#8B8B85\"}\r\n                    />\r\n                  </span>\r\n                  <EmojyPicker\r\n                    handleChange={addEmojy}\r\n                    style={{\r\n                      top: \"-20rem\",\r\n                      left: \"-20rem\",\r\n                    }}\r\n                    className=\"emojy-picker\"\r\n                  />\r\n                  <GetLocation\r\n                    location={location}\r\n                    handleLocation={(city) => {\r\n                      location ? setLocation(null) : setLocation(city);\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <button\r\n            disabled={loading}\r\n            className=\"btn btn--contained1-primary mg-none\"\r\n          >\r\n            {loading ? \"Posting....\" : \"Post\"}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nexport default PostForm;\r\n","import React, { useEffect,useState } from \"react\";\r\nimport Feed from \"./feed\";\r\nimport Loading from \"../../shared/loading\";\r\nimport PostForm from \"./post-form\";\r\nimport Slider from \"react-slick\";\r\nimport VideoPlayer from 'simple-react-video-thumbnail'\r\nimport './post.css'\r\nconst Posts = React.memo(({ currentUser }) => {\r\n  var settings = {\r\n    dots: true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 2,\r\n    slidesToScroll: 1\r\n  };\r\n\r\n  const [video ,setVideoData]=useState([]);\r\n\r\n  const [thumbnail,setThumnail]=useState(\"\")\r\n\r\n\r\n  useEffect(()=>{\r\n\r\n    fetch(\"https://socialbackends.herokuapp.com/video\").then((data)=>data.json()).then(data=>{\r\n\r\n      setVideoData(data.data)\r\n    \r\n      }\r\n    )\r\n  },[])\r\n\r\n\r\n  console.log(currentUser)\r\n  if (!currentUser || !currentUser.img || !currentUser.username) {\r\n    return (\r\n      <div>\r\n        <Loading />\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"post-body\">\r\n      <PostForm\r\n        user={{\r\n          username: currentUser.username,\r\n          token: currentUser.token,\r\n          id: currentUser._id,\r\n          img: currentUser.img,\r\n        }}\r\n      />\r\n\r\n<div className=\"slider\">\r\n<Slider {...settings}>\r\n          {video.map((value,index)=>{\r\n        \r\n             return(<>\r\n            \r\n            <div >\r\n  \r\n            <VideoPlayer videoUrl={value.postedByUrl} snapshotAt={10} />\r\n       </div>\r\n   </>)\r\n   })}\r\n\r\n    \r\n    </Slider>\r\n</div>\r\n      <div className=\"post__container\">\r\n        <Feed\r\n          uid={currentUser._id}\r\n          token={currentUser.token}\r\n          img={currentUser.img}\r\n          username={currentUser.username}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nexport default Posts;\r\n","import { useState, useCallback, useRef, useEffect } from \"react\";\r\n\r\nexport const useHttpClient = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState();\r\n\r\n  const activeHttpRequests = useRef([]);\r\n\r\n  const sendRequest = useCallback(\r\n    async (\r\n      url,\r\n      method = \"GET\",\r\n      body = null,\r\n      headers = { \"Content-Type\": \"application/json\" }\r\n    ) => {\r\n      setIsLoading(true);\r\n      const httpAbortCtrl = new AbortController();\r\n      activeHttpRequests.current.push(httpAbortCtrl);\r\n\r\n      try {\r\n        const response = await fetch(url, {\r\n          method,\r\n          body,\r\n          headers,\r\n          signal: httpAbortCtrl.signal\r\n        });\r\n\r\n        const responseData = await response.json();\r\n\r\n        activeHttpRequests.current = activeHttpRequests.current.filter(\r\n          reqCtrl => reqCtrl !== httpAbortCtrl\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(responseData.message);\r\n        }\r\n\r\n        setIsLoading(false);\r\n        return responseData;\r\n      } catch (err) {\r\n        setError(err.message);\r\n        setIsLoading(false);\r\n        throw err;\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const clearError = () => {\r\n    setError(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      activeHttpRequests.current.forEach(abortCtrl => abortCtrl.abort());\r\n    };\r\n  }, []);\r\n\r\n  return { isLoading, error, sendRequest, clearError };\r\n};\r\n","import React,{useState} from 'react';\r\nimport Slide from 'react-reveal/Slide';\r\nimport {Link} from 'react-router-dom';\r\nimport {useHttpClient} from '../../shared/hooks/http-hook';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport LoadindModal from './loading-modal'\r\nimport history from '../../history'\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nconst PostModel=({path,children,title,id})=>{\r\n const { isLoading, error, sendRequest } = useHttpClient();\r\n const [isOpen,setIsOpen]=useState(false);\r\n const dispatch = useDispatch();\r\n const token = useSelector(state=>state.isSignedIn)\r\n  const closeModal = ()=>{\r\n    if(isOpen){\r\n      setIsOpen(false);\r\n       document.body.style.overflowY='auto';\r\n    }\r\n  }\r\n  const openModal=()=>{\r\n    if(!isOpen){\r\n      setIsOpen(true);\r\n      document.body.style.overflowY='hidden';\r\n    }\r\n  }\r\n const deletePost= async ()=>{\r\n    try {\r\n      await sendRequest(\r\n       process.env.REACT_APP_BACKEND_URL+`/posts/${id}`,\r\n        'DELETE',null,{\r\n        'Content-Type': 'application/json',\r\n        Authorization:'Bearer '+ token\r\n     }\r\n      );    \r\n      dispatch({type:'DELETE_POST',payload:id});\r\n      console.log(id)\r\n      if(!path){\r\n        history.push('');\r\n    }\r\n    else{\r\n    dispatch({type:'DELETE_USER_POST',payload:id});\r\n    }\r\n    closeModal();\r\n    } catch (err) {}\r\n}\t\r\nreturn (\r\n        <>\r\n     <div style={{display:'inline-block'}} onClick={openModal}>{children}</div>\r\n      <CSSTransition\r\n        in={isOpen}\r\n        timeout={300}\r\n        classNames=\"modal\"\r\n        unmountOnExit\r\n      >\r\n\t\t<div className=\"modal__container\" onClick={closeModal}>\r\n         <div className=\"modal\">\r\n            <div className=\"modal__body\" onClick={(e)=>e.stopPropagation()} >\r\n             <ul className=\"modal__list\">\r\n             \t<li className=\"modal__item\">\r\n             \t\t<Link onClick={closeModal} to={{\r\n                        pathname:`/posts/edit/${id}`,\r\n                        state:{title}\r\n                         }}\r\n                         >\r\n             \t\tEdit Post\r\n             \t\t</Link>\r\n             \t</li>\r\n             \t<li className=\"modal__item delete\" onClick={()=>{\r\n             \t\tdeletePost();\r\n             \t\t\t\r\n             \t\t\t\r\n             \t}}>\r\n             \t\t{isLoading ? 'Deleting...' :'Delete Post'}\r\n             \t</li>\r\n             \t<li className=\"modal__item\" onClick={closeModal}>\r\n             \t\tCancel\r\n             \t</li>\r\n             </ul>\r\n            </div>\r\n         </div>\r\n\t\t</div>\r\n        </CSSTransition>\r\n        {isLoading && <LoadindModal />}\r\n        </>\r\n\t\t)\r\n}\r\nexport default PostModel;","import React,{Component} from 'react';\r\nimport Lightbox from 'react-image-lightbox';\r\nimport 'react-image-lightbox/style.css';\r\n\r\nexport default class LightboxImages extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n \r\n  }\r\n  render() {\r\n    const {image,closeLightBox} = this.props\r\n\r\n    return (\r\n      <div>      \r\n          <Lightbox\r\n            mainSrc={image}\r\n            onCloseRequest={closeLightBox}              \r\n          />\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { Menu_2, Heart, Heart_4, Comment2 } from \"../../assets/icons/icons\";\r\nimport PostModel from \"../../shared/models/post-model\";\r\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LightBoxImage from \"./image-preview\";\r\nimport socket from \"../socket\";\r\nimport AwesomeSlider from 'react-awesome-slider';\r\nimport 'react-awesome-slider/dist/styles.css';\r\n\r\nconst PostItem = ({ post, path, uid, token, img, username }) => {\r\n  const [liked, setLiked] = useState(post.liked.indexOf(uid));\r\n  const nol = useRef(post.liked.length);\r\n  const test = useRef(null);\r\n  const { sendRequest } = useHttpClient();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const slider = (\r\n    <AwesomeSlider>\r\n      <div>1</div>\r\n      <div>2</div>\r\n      <div>3</div>\r\n      <div>4</div>\r\n    </AwesomeSlider>\r\n  );\r\n\r\n  const handleLike = async () => {\r\n    try {\r\n      const like = await sendRequest(\r\n        process.env.REACT_APP_BACKEND_URL + \"/posts/post\",\r\n        \"PATCH\",\r\n        JSON.stringify({\r\n          postId: post._id,\r\n          creator: uid,\r\n          img,\r\n          username,\r\n        }),\r\n        {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        }\r\n      );\r\n\r\n      socket.emit(\"action\", {\r\n        ...like,\r\n        type: \"SEND_NOTFY\",\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  \r\n  const [id, setId] = useState();\r\n  \r\n  useEffect(() => {\r\n    if (test.current) {\r\n      const timer = setTimeout(() => {\r\n        handleLike();\r\n      }, 500);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [liked]);\r\n  const getLeftTime = (oldTime) => {\r\n    const now = new Date();\r\n    const leftTime = new Date(oldTime).getTime();\r\n    const leftHours = (now.getTime() - leftTime) / (1000 * 3600);\r\n    if (leftHours < 1) {\r\n      let t = Math.ceil(leftHours * 60);\r\n      return t + (t === 1 ? \" MINUTE\" : \" MINUTES\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24) {\r\n      let t = Math.floor(leftHours);\r\n      return t + (t === 1 ? \" Hour\" : \" Hours\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24 * 7) {\r\n      let t = Math.floor(leftHours / 24);\r\n      return t + (t === 1 ? \" Day\" : \" Day\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24 * 30) {\r\n      let t = Math.floor(leftHours / (24 * 7));\r\n      return t + (t === 1 ? \" Week\" : \" Weeks\") + \" AGO\";\r\n    }\r\n    if (leftHours < 365 * 24) {\r\n      let t = Math.floor(leftHours / (24 * 30));\r\n      return t + (t === 1 ? \" Month\" : \" Months\") + \" AGO\";\r\n    } else {\r\n      let t = Math.floor(leftHours / (365 * 24));\r\n      return t + (t === 1 ? \" Year\" : \" Years\") + \" AGO\";\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"post\" key={post._id}>\r\n      {isOpen && (\r\n        <LightBoxImage image={isOpen} closeLightBox={() => setIsOpen(false)} />\r\n      )}\r\n      \r\n\r\n     \r\n\r\n\r\n      <div className=\"post__header\">\r\n        <div className=\"post__header--info\">\r\n          <div className=\"post__header--img\">\r\n            {post.creator?.isOnline && <div className=\"userActive\"></div>}\r\n            <Link to={`/user/${post?.creator?._id || post.creator}`}>\r\n              <img src={post?.creator?.img || img} alt=\"aa\" />\r\n            </Link>\r\n          </div>\r\n          <div className=\"post__header--name\">\r\n            <Link to={`/user/${post.creator?._id || post.creator}`}>\r\n              <span className=\"name\">{post.creator?.username || username}</span>\r\n            </Link>\r\n            {post.location !== \"null\" && (\r\n              <span className=\"place\">{post.location}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {uid === (post.creator?._id ? post.creator?._id : post.creator) && (\r\n          <PostModel\r\n          path={path}\r\n          id={id || post._id}\r\n          title={post.title}\r\n          >\r\n          <div className=\"post__menu\">     \r\n            <span className=\"icon\">\r\n              <Menu_2 width=\"2.3rem\" height=\"2.3rem\" fill=\"#fff\" />\r\n            </span>\r\n          </div>\r\n          </PostModel>\r\n        )}\r\n      </div>\r\n      {post.title && (\r\n        <div className=\"post__content\">\r\n          <p>{post.title ? post.title : null}</p>\r\n        </div>\r\n      )}\r\n      {post.img && (\r\n        <div className=\"post__body\">\r\n          <img src={post.img} onClick={() => setIsOpen(post.img)} />\r\n        </div>\r\n      )}\r\n      <div className=\"post__tail\">\r\n        <div className=\"post__tail__communication\">\r\n          <div className=\"post__tail__communication__item\">\r\n            <span\r\n              className=\"icon\"\r\n              onClick={() => {\r\n                liked < 0 ? ++nol.current : --nol.current;\r\n                setLiked((e) => (e === 0 ? -1 : e * -1));\r\n                if (!test.current) test.current = 1;\r\n              }}\r\n            >\r\n              {liked < 0 ? (\r\n                <Heart width=\"2rem\" height=\"2rem\" fill=\"#fff\" />\r\n              ) : (\r\n                <Heart_4 width=\"2rem\" height=\"2rem\" fill=\"#fff\" />\r\n              )}\r\n            </span>\r\n            <span className=\"nol\">{nol.current}</span>\r\n          </div>\r\n          <Link to={`/post/${post._id}`}>\r\n            <div className=\"post__tail__communication__item\">\r\n              <span className=\"icon\">\r\n                <Comment2 width=\"2rem\" height=\"2rem\" fill=\"#fff\" />\r\n              </span>\r\n              <span className=\"nol\">\r\n                {post.comments ? post.comments.length : 0}\r\n              </span>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n        <div className=\"post__tail--time-left\">\r\n          {getLeftTime(post.createdAt)}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default PostItem;\r\n"],"sourceRoot":""}