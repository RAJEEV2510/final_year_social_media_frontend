{"version":3,"sources":["components/posts/post-form/render-comments.js","components/posts/post-form-comments.js","components/posts/post-comments.jsx","shared/hooks/http-hook.js","shared/models/post-model.js","components/posts/image-preview.jsx","components/posts/post-item.js"],"names":["RenderComments","comments","getLeftTime","handlePostComments","oldTime","now","Date","leftTime","getTime","leftHours","t","Math","ceil","floor","map","comment","className","to","user","_id","src","img","alt","username","content","createdAt","reducer","state","action","id","type","payload","length","loaded","PostFormComments","postId","useState","setContent","useFetch","loading","error","request","useReducer","dispatch","addComment","a","process","userId","Authorization","token","response","data","notify","socket","emit","console","log","handleSubmit","e","preventDefault","trim","load","post","useEffect","disabled","onClick","onSubmit","placeholder","value","onChange","target","PostComments","props","useSelector","currentUser","match","params","setPosts","changeTitle","title","document","handlePost","creator","history","goBack","viewBox","d","uid","useHttpClient","isLoading","setIsLoading","setError","activeHttpRequests","useRef","sendRequest","useCallback","url","method","body","headers","httpAbortCtrl","AbortController","current","push","fetch","signal","json","responseData","filter","reqCtrl","ok","Error","message","forEach","abortCtrl","abort","clearError","PostModel","path","children","isOpen","setIsOpen","useDispatch","isSignedIn","closeModal","style","overflowY","deletePost","display","CSSTransition","in","timeout","classNames","unmountOnExit","stopPropagation","pathname","LightboxImages","this","image","closeLightBox","mainSrc","onCloseRequest","Component","PostItem","liked","indexOf","setLiked","nol","test","handleLike","JSON","stringify","like","timer","setTimeout","clearTimeout","isOnline","location","width","height","fill"],"mappings":"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","file":"static/js/14.d532de22.chunk.js","sourcesContent":["import React from \"react\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport Loading from \"../../../shared/loading.js\";\r\nimport {Link} from 'react-router-dom'\r\nconst RenderComments = ({ comments, handlePostComments }) => {\r\n  const getLeftTime = (oldTime) => {\r\n    const now = new Date();\r\n    const leftTime = new Date(oldTime).getTime();\r\n    const leftHours = (now.getTime() - leftTime) / (1000 * 3600);\r\n    if (leftHours < 1) {\r\n      let t = Math.ceil(leftHours * 60);\r\n      return t + (t === 1 ? \" MINUTE\" : \" MINUTES\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24) {\r\n      let t = Math.floor(leftHours);\r\n      return t + (t === 1 ? \" Hour\" : \" Hours\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24 * 7) {\r\n      let t = Math.floor(leftHours / 24);\r\n      return t + (t === 1 ? \" Day\" : \" Day\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24 * 30) {\r\n      let t = Math.floor(leftHours / (24 * 7));\r\n      return t + (t === 1 ? \" Week\" : \" Weeks\") + \" AGO\";\r\n    }\r\n    if (leftHours < 365 * 24) {\r\n      let t = Math.floor(leftHours / (24 * 30));\r\n      return t + (t === 1 ? \" Month\" : \" Months\") + \" AGO\";\r\n    } else {\r\n      let t = Math.floor(leftHours / (365 * 24));\r\n      return t + (t === 1 ? \" Year\" : \" Years\") + \" AGO\";\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      {comments.comments.map((comment) => (\r\n        <li className=\"post__comments__item\" key={comment._id}>\r\n          <Link to={`/user/${comment.user._id}`}>\r\n          <div className=\"comment__user\">\r\n            <div className=\"comment__user--img\">\r\n              <img src={comment.user.img} alt=\"aa\" />\r\n            </div>\r\n            <div className=\"comment__user--name\">{comment.user.username}</div>\r\n          </div>\r\n          </Link>\r\n          <div className=\"comment__content\">\r\n            <p>{comment.content}</p>\r\n          </div>\r\n          <div className=\"comment__time\">{getLeftTime(comment.createdAt)}</div>\r\n        </li>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\nexport default RenderComments;\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport { useFetch } from \"../../shared/hooks/useFetch\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Loading from \"../../shared/models/loading-modal\";\r\nimport RenderComments from \"./post-form/render-comments\";\r\nimport socket from \"../socket\";\r\n\r\nconst reducer = (state, action, id) => {\r\n  switch (action.type) {\r\n    case \"NEW_COMMENTS\":\r\n      return {\r\n        comments: action.payload.comments,\r\n        length: action.payload.length ? action.payload.length : state.length,\r\n        loaded: true,\r\n      };\r\n    case \"FETCH_COMMENTS\":\r\n      return {\r\n        comments: [...state.comments, ...action.payload.comments],\r\n        length: action.payload.length ? action.payload.length : state.length,\r\n        loaded: true,\r\n      };\r\n    case \"NEW_COMMENT\":\r\n      return {\r\n        comments: [action.payload, ...state.comments],\r\n        length: state.length + 1,\r\n      };\r\n  }\r\n};\r\n\r\nconst PostFormComments = ({ postId, user, id }) => {\r\n  const [content, setContent] = useState();\r\n  const { error, loading, request } = useFetch();\r\n  const [comments, dispatch] = useReducer(reducer, {\r\n    comments: [],\r\n    length: 0,\r\n    loaded: false,\r\n  });\r\n  const addComment = async (content) => {\r\n    setContent(\"\");\r\n    try {\r\n      const response = await request(\r\n        process.env.REACT_APP_BACKEND_URL + `/posts/comments/create`,\r\n        \"post\",\r\n        {\r\n          content,\r\n          userId: user._id,\r\n          postId,\r\n          img: user.img,\r\n          username: user.username,\r\n        },\r\n        {\r\n          Authorization: \"Bearer \" + user.token,\r\n        }\r\n      );\r\n      dispatch({\r\n        type: \"NEW_COMMENT\",\r\n        payload: {\r\n          ...response.data.comment,\r\n          user: {\r\n          img: user.img,\r\n          _id: user._id,\r\n          username: user.username,\r\n          },\r\n        },\r\n      });\r\n      if(response.data.notify){\r\n      socket.emit(\"action\", {\r\n        state: \"ADD\",\r\n        notify: response.data.notify,\r\n        type: \"SEND_NOTFY\",\r\n      });\r\n    }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!content.trim()) return;\r\n    addComment(content);\r\n  };\r\n\r\n  const handlePostComments = async (load) => {\r\n    try {\r\n      const response = await request(\r\n        process.env.REACT_APP_BACKEND_URL +\r\n          `/posts/comments/${id}?skip=${load ? 0 : comments.comments.length}`\r\n      );\r\n      const length = response.data.length;\r\n      if (!load) {\r\n        dispatch({\r\n          type: \"FETCH_COMMENTS\",\r\n          payload: { comments: response.data.post.comments, length },\r\n        });\r\n      } else {\r\n        dispatch({\r\n          type: \"NEW_COMMENTS\",\r\n          payload: { comments: response.data.post.comments, length },\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    handlePostComments(\"load\");\r\n  }, [id]);\r\n  if (comments.comments.length === 0 && comments.loaded === false)\r\n    return <Loading />;\r\n  return (\r\n    <div className=\"post__comments\">\r\n      <ul className=\"post__comments__list\">\r\n        <RenderComments\r\n          comments={comments}\r\n          handlePostComments={handlePostComments}\r\n        />\r\n        {comments.comments.length < comments.length &&\r\n          comments.comments.length != 0 && (\r\n            <button\r\n              className=\"btn btn--contained1-primary\"\r\n              disabled={loading}\r\n              onClick={handlePostComments}\r\n            >\r\n              {loading ? \"Loading\" : \"Load more comments\"}\r\n            </button>\r\n          )}\r\n      </ul>\r\n      <div className=\"post__comments__form\">\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form__unit\">\r\n            <input\r\n              placeholder=\" \"\r\n              type=\"text\"\r\n              value={content}\r\n              onChange={(e) => setContent(e.target.value)}\r\n              className=\"form__input\"\r\n            />\r\n            <label className=\"form__label\">Write a comment</label>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default PostFormComments;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useFetch } from \"../../shared/hooks/useFetch\";\r\nimport PostItem from \"./post-item\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Loading from \"../../shared/models/loading-modal\";\r\nimport PostFormComments from \"./post-form-comments\";\r\nimport history from \"../../history\";\r\n\r\nconst PostComments = (props) => {\r\n  const user = useSelector((state) => state.currentUser);\r\n  const id = props.match.params.id;\r\n  const { error, loading, request } = useFetch();\r\n  const [post, setPosts] = useState();\r\n  const changeTitle=(title)=>{\r\n    document.title=title;\r\n  }\r\n  const handlePost = async () => {\r\n    try {\r\n      const response = await request(\r\n        process.env.REACT_APP_BACKEND_URL + `/posts/${id}`\r\n      );\r\n      setPosts(response.data.post);\r\n      if(response.data.post.creator &&  response.data.post.creator.username){\r\n        if(response.data.post.creator._id == user._id){\r\n          changeTitle(\"Your post\")\r\n        }else changeTitle(`${response.data.post.creator.username} post`)\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    handlePost();\r\n  }, [id]);\r\n\r\n  if (!post || loading) {\r\n    return <Loading />;\r\n  }\r\n  return (\r\n    <div>\r\n      <div className=\"profile__header\">\r\n        <div className=\"profile__header--icon\" onClick={() => history.goBack()}>\r\n          <svg viewBox=\"0 0 24 24\">\r\n            <g>\r\n              <path d=\"M20 11H7.414l4.293-4.293c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414l6 6c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L7.414 13H20c.553 0 1-.447 1-1s-.447-1-1-1z\"></path>\r\n            </g>\r\n          </svg>\r\n        </div>\r\n        <h2>{post.creator.username}'s Post</h2>\r\n      </div>\r\n      <PostItem\r\n        uid={user._id}\r\n        img={user.img}\r\n        username={user.username}\r\n        token={user.token}\r\n        post={post}\r\n      />\r\n      <PostFormComments id={id} user={user} postId={post._id} />\r\n    </div>\r\n  );\r\n};\r\nexport default PostComments;\r\n","import { useState, useCallback, useRef, useEffect } from \"react\";\r\n\r\nexport const useHttpClient = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState();\r\n\r\n  const activeHttpRequests = useRef([]);\r\n\r\n  const sendRequest = useCallback(\r\n    async (\r\n      url,\r\n      method = \"GET\",\r\n      body = null,\r\n      headers = { \"Content-Type\": \"application/json\" }\r\n    ) => {\r\n      setIsLoading(true);\r\n      const httpAbortCtrl = new AbortController();\r\n      activeHttpRequests.current.push(httpAbortCtrl);\r\n\r\n      try {\r\n        const response = await fetch(url, {\r\n          method,\r\n          body,\r\n          headers,\r\n          signal: httpAbortCtrl.signal\r\n        });\r\n\r\n        const responseData = await response.json();\r\n\r\n        activeHttpRequests.current = activeHttpRequests.current.filter(\r\n          reqCtrl => reqCtrl !== httpAbortCtrl\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(responseData.message);\r\n        }\r\n\r\n        setIsLoading(false);\r\n        return responseData;\r\n      } catch (err) {\r\n        setError(err.message);\r\n        setIsLoading(false);\r\n        throw err;\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const clearError = () => {\r\n    setError(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      activeHttpRequests.current.forEach(abortCtrl => abortCtrl.abort());\r\n    };\r\n  }, []);\r\n\r\n  return { isLoading, error, sendRequest, clearError };\r\n};\r\n","import React,{useState} from 'react';\r\nimport Slide from 'react-reveal/Slide';\r\nimport {Link} from 'react-router-dom';\r\nimport {useHttpClient} from '../../shared/hooks/http-hook';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport LoadindModal from './loading-modal'\r\nimport history from '../../history'\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nconst PostModel=({path,children,title,id})=>{\r\n const { isLoading, error, sendRequest } = useHttpClient();\r\n const [isOpen,setIsOpen]=useState(false);\r\n const dispatch = useDispatch();\r\n const token = useSelector(state=>state.isSignedIn)\r\n  const closeModal = ()=>{\r\n    if(isOpen){\r\n      setIsOpen(false);\r\n       document.body.style.overflowY='auto';\r\n    }\r\n  }\r\n  const openModal=()=>{\r\n    if(!isOpen){\r\n      setIsOpen(true);\r\n      document.body.style.overflowY='hidden';\r\n    }\r\n  }\r\n const deletePost= async ()=>{\r\n    try {\r\n      await sendRequest(\r\n       process.env.REACT_APP_BACKEND_URL+`/posts/${id}`,\r\n        'DELETE',null,{\r\n        'Content-Type': 'application/json',\r\n        Authorization:'Bearer '+ token\r\n     }\r\n      );    \r\n      dispatch({type:'DELETE_POST',payload:id});\r\n      console.log(id)\r\n      if(!path){\r\n        history.push('');\r\n    }\r\n    else{\r\n    dispatch({type:'DELETE_USER_POST',payload:id});\r\n    }\r\n    closeModal();\r\n    } catch (err) {}\r\n}\t\r\nreturn (\r\n        <>\r\n     <div style={{display:'inline-block'}} onClick={openModal}>{children}</div>\r\n      <CSSTransition\r\n        in={isOpen}\r\n        timeout={300}\r\n        classNames=\"modal\"\r\n        unmountOnExit\r\n      >\r\n\t\t<div className=\"modal__container\" onClick={closeModal}>\r\n         <div className=\"modal\">\r\n            <div className=\"modal__body\" onClick={(e)=>e.stopPropagation()} >\r\n             <ul className=\"modal__list\">\r\n             \t<li className=\"modal__item\">\r\n             \t\t<Link onClick={closeModal} to={{\r\n                        pathname:`/posts/edit/${id}`,\r\n                        state:{title}\r\n                         }}\r\n                         >\r\n             \t\tEdit Post\r\n             \t\t</Link>\r\n             \t</li>\r\n             \t<li className=\"modal__item delete\" onClick={()=>{\r\n             \t\tdeletePost();\r\n             \t\t\t\r\n             \t\t\t\r\n             \t}}>\r\n             \t\t{isLoading ? 'Deleting...' :'Delete Post'}\r\n             \t</li>\r\n             \t<li className=\"modal__item\" onClick={closeModal}>\r\n             \t\tCancel\r\n             \t</li>\r\n             </ul>\r\n            </div>\r\n         </div>\r\n\t\t</div>\r\n        </CSSTransition>\r\n        {isLoading && <LoadindModal />}\r\n        </>\r\n\t\t)\r\n}\r\nexport default PostModel;","import React,{Component} from 'react';\r\nimport Lightbox from 'react-image-lightbox';\r\nimport 'react-image-lightbox/style.css';\r\n\r\nexport default class LightboxImages extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n \r\n  }\r\n  render() {\r\n    const {image,closeLightBox} = this.props\r\n\r\n    return (\r\n      <div>      \r\n          <Lightbox\r\n            mainSrc={image}\r\n            onCloseRequest={closeLightBox}              \r\n          />\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { Menu_2, Heart, Heart_4, Comment2 } from \"../../assets/icons/icons\";\r\nimport PostModel from \"../../shared/models/post-model\";\r\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LightBoxImage from \"./image-preview\";\r\nimport socket from \"../socket\";\r\nimport AwesomeSlider from 'react-awesome-slider';\r\nimport 'react-awesome-slider/dist/styles.css';\r\n\r\nconst PostItem = ({ post, path, uid, token, img, username }) => {\r\n  const [liked, setLiked] = useState(post.liked.indexOf(uid));\r\n  const nol = useRef(post.liked.length);\r\n  const test = useRef(null);\r\n  const { sendRequest } = useHttpClient();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const slider = (\r\n    <AwesomeSlider>\r\n      <div>1</div>\r\n      <div>2</div>\r\n      <div>3</div>\r\n      <div>4</div>\r\n    </AwesomeSlider>\r\n  );\r\n\r\n  const handleLike = async () => {\r\n    try {\r\n      const like = await sendRequest(\r\n        process.env.REACT_APP_BACKEND_URL + \"/posts/post\",\r\n        \"PATCH\",\r\n        JSON.stringify({\r\n          postId: post._id,\r\n          creator: uid,\r\n          img,\r\n          username,\r\n        }),\r\n        {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        }\r\n      );\r\n\r\n      socket.emit(\"action\", {\r\n        ...like,\r\n        type: \"SEND_NOTFY\",\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  \r\n  const [id, setId] = useState();\r\n  \r\n  useEffect(() => {\r\n    if (test.current) {\r\n      const timer = setTimeout(() => {\r\n        handleLike();\r\n      }, 500);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [liked]);\r\n  const getLeftTime = (oldTime) => {\r\n    const now = new Date();\r\n    const leftTime = new Date(oldTime).getTime();\r\n    const leftHours = (now.getTime() - leftTime) / (1000 * 3600);\r\n    if (leftHours < 1) {\r\n      let t = Math.ceil(leftHours * 60);\r\n      return t + (t === 1 ? \" MINUTE\" : \" MINUTES\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24) {\r\n      let t = Math.floor(leftHours);\r\n      return t + (t === 1 ? \" Hour\" : \" Hours\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24 * 7) {\r\n      let t = Math.floor(leftHours / 24);\r\n      return t + (t === 1 ? \" Day\" : \" Day\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24 * 30) {\r\n      let t = Math.floor(leftHours / (24 * 7));\r\n      return t + (t === 1 ? \" Week\" : \" Weeks\") + \" AGO\";\r\n    }\r\n    if (leftHours < 365 * 24) {\r\n      let t = Math.floor(leftHours / (24 * 30));\r\n      return t + (t === 1 ? \" Month\" : \" Months\") + \" AGO\";\r\n    } else {\r\n      let t = Math.floor(leftHours / (365 * 24));\r\n      return t + (t === 1 ? \" Year\" : \" Years\") + \" AGO\";\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"post\" key={post._id}>\r\n      {isOpen && (\r\n        <LightBoxImage image={isOpen} closeLightBox={() => setIsOpen(false)} />\r\n      )}\r\n      \r\n\r\n     \r\n\r\n\r\n      <div className=\"post__header\">\r\n        <div className=\"post__header--info\">\r\n          <div className=\"post__header--img\">\r\n            {post.creator?.isOnline && <div className=\"userActive\"></div>}\r\n            <Link to={`/user/${post?.creator?._id || post.creator}`}>\r\n              <img src={post?.creator?.img || img} alt=\"aa\" />\r\n            </Link>\r\n          </div>\r\n          <div className=\"post__header--name\">\r\n            <Link to={`/user/${post.creator?._id || post.creator}`}>\r\n              <span className=\"name\">{post.creator?.username || username}</span>\r\n            </Link>\r\n            {post.location !== \"null\" && (\r\n              <span className=\"place\">{post.location}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {uid === (post.creator?._id ? post.creator?._id : post.creator) && (\r\n          <PostModel\r\n          path={path}\r\n          id={id || post._id}\r\n          title={post.title}\r\n          >\r\n          <div className=\"post__menu\">     \r\n            <span className=\"icon\">\r\n              <Menu_2 width=\"2.3rem\" height=\"2.3rem\" fill=\"#fff\" />\r\n            </span>\r\n          </div>\r\n          </PostModel>\r\n        )}\r\n      </div>\r\n      {post.title && (\r\n        <div className=\"post__content\">\r\n          <p>{post.title ? post.title : null}</p>\r\n        </div>\r\n      )}\r\n      {post.img && (\r\n        <div className=\"post__body\">\r\n          <img src={post.img} onClick={() => setIsOpen(post.img)} />\r\n        </div>\r\n      )}\r\n      <div className=\"post__tail\">\r\n        <div className=\"post__tail__communication\">\r\n          <div className=\"post__tail__communication__item\">\r\n            <span\r\n              className=\"icon\"\r\n              onClick={() => {\r\n                liked < 0 ? ++nol.current : --nol.current;\r\n                setLiked((e) => (e === 0 ? -1 : e * -1));\r\n                if (!test.current) test.current = 1;\r\n              }}\r\n            >\r\n              {liked < 0 ? (\r\n                <Heart width=\"2rem\" height=\"2rem\" fill=\"#fff\" />\r\n              ) : (\r\n                <Heart_4 width=\"2rem\" height=\"2rem\" fill=\"#fff\" />\r\n              )}\r\n            </span>\r\n            <span className=\"nol\">{nol.current}</span>\r\n          </div>\r\n          <Link to={`/post/${post._id}`}>\r\n            <div className=\"post__tail__communication__item\">\r\n              <span className=\"icon\">\r\n                <Comment2 width=\"2rem\" height=\"2rem\" fill=\"#fff\" />\r\n              </span>\r\n              <span className=\"nol\">\r\n                {post.comments ? post.comments.length : 0}\r\n              </span>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n        <div className=\"post__tail--time-left\">\r\n          {getLeftTime(post.createdAt)}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default PostItem;\r\n"],"sourceRoot":""}