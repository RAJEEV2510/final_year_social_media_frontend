{"version":3,"sources":["components/placeholders/post-placeholder.jsx","components/users/profile/profile-board.jsx","components/users/profile/profile-feed.jsx","components/placeholders/profile-placehoder.jsx","components/users/profile/profile.jsx","shared/hooks/http-hook.js","shared/models/post-model.js","components/posts/image-preview.jsx","components/posts/post-item.js"],"names":["PostPlaceholder","className","ProfileBoard","React","memo","user","isProfile","img","setImg","useFetch","loading","request","error","clearError","filePickerRef","useRef","CropperRef","useState","crop","setCrop","files","setFiles","friendState","setFriendState","userId","JSON","parse","localStorage","getItem","_id","useEffect","fetch","then","data","json","res","friendId","friends","filter","friend","console","log","length","previewImg","a","fileReader","FileReader","onload","result","readAsDataURL","changeImg","imgData","dataset","payload","FormData","append","x","y","width","height","process","Authorization","token","respond","setItem","stringify","onClick","e","stopPropagation","ref","src","style","zoomable","aspectRatio","viewMode","responsive","guides","current","cropper","getData","message","closeModal","backgroundImage","cover","display","type","accept","onChange","event","pickedFile","target","title","cursor","click","alt","fill","username","name","posts","chatRooms","about","bio","marginTop","marginLeft","Button","variant","fontSize","borderRadius","addFrndId","frndId","method","headers","body","response","catch","togleFriend","Date","createdAt","toLocaleDateString","livesIn","from","birth","gender","ProfileFeed","id","userPost","useSelector","state","setPosts","dispatch","useDispatch","setHasMore","handlePosts","responseData","map","post","path","uid","ProfilePlaceholder","div","Profile","props","setUser","currentUser","match","params","fetchProfileData","document","to","useHttpClient","isLoading","setIsLoading","setError","activeHttpRequests","sendRequest","useCallback","url","httpAbortCtrl","AbortController","push","signal","reqCtrl","ok","Error","forEach","abortCtrl","abort","PostModel","children","isOpen","setIsOpen","isSignedIn","overflowY","deletePost","history","CSSTransition","in","timeout","classNames","unmountOnExit","pathname","LightboxImages","this","image","closeLightBox","mainSrc","onCloseRequest","Component","PostItem","liked","indexOf","setLiked","nol","test","handleLike","postId","creator","like","socket","emit","timer","setTimeout","clearTimeout","isOnline","location","comments","oldTime","now","leftTime","getTime","leftHours","t","Math","ceil","floor","getLeftTime"],"mappings":"iGAAA,gBAsBeA,IApBS,WACvB,OAAO,sBAAKC,UAAU,mBAAf,UACD,sBAAKA,UAAU,2BAAf,UACI,qBAAKA,UAAU,0BACf,sBAAKA,UAAU,yBAAf,UACA,qBAAKA,UAAU,+BACd,qBAAKA,UAAU,iCAGpB,sBAAKA,UAAU,4BAAf,UACC,wBACA,wBACA,2BAED,sBAAKA,UAAU,yBAAf,UACA,qBAAKA,UAAU,2BACf,qBAAKA,UAAU,mC,+LCDhBC,EAAeC,IAAMC,MAAK,YAAuC,IAApCC,EAAmC,EAAnCA,KAAMC,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,IAAKC,EAAa,EAAbA,OACvD,EAAgDC,cAAxCC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,QAASC,EAA1B,EAA0BA,MAAOC,EAAjC,EAAiCA,WAC3BC,EAAgBC,mBAChBC,EAAaD,iBAAO,GAC1B,EAAwBE,oBAAS,GAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA0BF,qBAA1B,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAAsCJ,mBAAS,cAA/C,mBAAOK,EAAP,KAAoBC,EAApB,KAEMC,EAASC,KAAKC,MAAMC,aAAaC,QAAQ,cAAcC,IAG7DC,qBAAW,WAGTC,MAAM,gDAAD,OAAiDP,IAAUQ,MAAK,SAAAC,GAAI,OAAEA,EAAKC,UAAQF,MAAK,SAAAG,GAG3F,GAAQ,MAALA,EAAU,CAGb,IACMC,EADsBD,EAAIE,QACKC,QAAO,SAACC,GAC3C,OAAOA,GAAUlC,EAAKwB,OAExBW,QAAQC,IAAInB,EAAYc,GACpBA,EAASM,QAAU,EACrBnB,EAAe,YACVA,EAAe,mBAGnBA,EAAe,mBAKjB,IAEL,IAuDMoB,EAAU,uCAAG,4BAAAC,EAAA,uDACXC,EAAa,IAAIC,YACZC,OAAS,WAClB5B,EAAQ0B,EAAWG,SAErBH,EAAWI,cAAc7B,GALR,2CAAH,qDAOV8B,EAAS,uCAAG,WAAOC,GAAP,mBAAAP,EAAA,6DACVQ,EAAU3B,KAAKC,MAAMC,aAAaC,QAAQ,eAC1CyB,EAAU,IAAIC,UACZC,OAAO,IAAKJ,EAAQK,GAC5BH,EAAQE,OAAO,IAAKJ,EAAQM,GAC5BJ,EAAQE,OAAO,QAASJ,EAAQO,OAChCL,EAAQE,OAAO,SAAUJ,EAAQQ,QACjCN,EAAQE,OAAO,MAAOnC,GAPN,mBASQT,EACpBiD,2CAAA,qBAAkDvD,EAAKwB,KACvD,OACAwB,EACA,CACEQ,cAAe,UAAYxD,EAAKyD,QAdtB,QASRC,EATQ,OAiBdvD,EAAOuD,EAAQ9B,KAAK1B,KACpBoB,aAAaqC,QACX,YACAvC,KAAKwC,UAAL,2BACKb,GADL,IAEE7C,IAAKwD,EAAQ9B,KAAK1B,QAtBR,kDA0BdiC,QAAQC,IAAR,MA1Bc,0DAAH,sDA6BfX,qBAAU,WACHV,GAGLuB,MAEC,CAACvB,IAKJ,OACE,gCACGV,GAAW,cAAC,IAAD,IACXQ,GACC,qBAAKjB,UAAU,mBAAf,SACE,qBAAKA,UAAU,QAAf,SACE,sBACEA,UAAU,sBACViE,QAAS,SAACC,GAAD,OAAOA,EAAEC,mBAFpB,UAIE,cAAC,IAAD,CACEC,IAAKrD,EACLsD,IAAKpD,EACLqD,MAAO,CAAEZ,OAAQ,OAAQD,MAAO,QAEhCc,UAAU,EACVC,YAAa,EACbC,SAAU,EACVC,YAAY,EACZC,QAAQ,IAEV,sBAAK3E,UAAU,gBAAf,UACE,wBACEA,UAAU,2BACViE,QAAS,kBAAM/C,GAAQ,IAFzB,oBAMA,wBACElB,UAAU,6BACViE,QAAS,WACP/C,EAAQ,MACR+B,EAAUlC,EAAW6D,QAAQC,QAAQC,YAJzC,8BAcTnE,GACC,cAAC,IAAD,CACEoE,QAAQ,sCACRC,WAAYpE,IAGhB,qBACEZ,UAAU,iBACVsE,MAAO,CACLW,gBAAgB,OAAD,OACb7E,EAAK8E,MACD9E,EAAK8E,MACL,uGAHS,QAOnB,sBAAKlF,UAAU,eAAf,UACGK,GACC,uBACE+D,IAAKvD,EACLyD,MAAO,CAAEa,QAAS,QAClBC,KAAK,OACLC,OAAO,kBACPC,SAvHY,SAACC,GACrB,IAAIC,EACAD,EAAME,OAAOtE,OAAuC,IAA9BoE,EAAME,OAAOtE,MAAMsB,SAC3C+C,EAAaD,EAAME,OAAOtE,MAAM,GAChCC,EAASoE,OAsHP,sBAAKxF,UAAU,gBAAf,UACE,sBACEA,UAAU,yBACV0F,MAAM,oBACNpB,MAAO,CAAEqB,OAAO,GAAD,OAAKtF,EAAY,UAAY,YAC5C4D,QAAS5D,EA5EM,WACvBQ,EAAc+D,QAAQgB,SA2E0B,KAJ1C,UAME,qBAAKvB,IAAK/D,GAAOF,EAAKE,IAAKuF,IAAI,OAC9BxF,GACC,qBAAKL,UAAU,+BAAf,SACE,cAAC,IAAD,CAAQ8F,KAAK,OAAOrC,MAAM,OAAOC,OAAO,cAI9C,oBAAI1D,UAAU,0BAAd,SAAyCI,EAAK2F,WAC9C,oBAAI/F,UAAU,sBAAd,SAAqCI,EAAK4F,UAG5C,sBAAKhG,UAAU,yBAAf,UACE,sBAAKA,UAAU,+BAAf,UACE,uCACA,iDAGF,qBAAKA,UAAU,aACf,sBAAKA,UAAU,iCAAf,UACE,6BAAKI,EAAK6F,MAAMxD,SAChB,6BAAKrC,EAAK8F,UAAUzD,YAErBrC,EAAK+F,OAAS/F,EAAK+F,MAAMC,KACxB,mBAAGpG,UAAU,qBAAb,SAAmCI,EAAK+F,MAAMC,YAIpD,qBACEpG,UAAU,eACVsE,MAAO,CAAE+B,UAAW,OAAQ5C,MAAO,QAAS6C,WAAY,QAF1D,SAKGlG,EAAKwB,KAAKL,EACX,cAACgF,EAAA,EAAD,CACEC,QAAQ,YACRlC,MAAO,CACLb,MAAO,kBACPgD,SAAU,OACVC,aAAc,QAEhBzC,QAAS,YAzNG,WAElB,GAAmB,cAAf5C,EAA6B,CAC/B,IAAMW,EAAO,CACX2E,UAAWnF,KAAKC,MAAMC,aAAaC,QAAQ,cAAcC,IACzDgF,OAAQxG,EAAKwB,KAEfW,QAAQC,IAAIR,GACZF,MAAM,qDAAsD,CAC1D+E,OAAQ,QACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMvF,KAAKwC,UAAUhC,KAEpBD,MAAK,SAACiF,GAAD,OAAcA,EAAS/E,UAC5BF,MAAK,SAACC,GACLO,QAAQC,IAAI,WAAYR,GACxBV,EAAe,eAEhB2F,OAAM,SAACtG,GACN4B,QAAQ5B,MAAM,SAAUA,UAIzB,CACH,IAAMqB,EAAO,CACX2E,UAAWnF,KAAKC,MAAMC,aAAaC,QAAQ,cAAcC,IACzDgF,OAAQxG,EAAKwB,KAGfE,MAAM,uDAAwD,CAC5D+E,OAAQ,QACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMvF,KAAKwC,UAAUhC,KAEpBD,MAAK,SAACiF,GAAD,OAAcA,EAAS/E,UAC5BF,MAAK,SAACC,GACLO,QAAQC,IAAI,WAAYR,GACxBV,EAAe,iBAEhB2F,OAAM,SAACtG,GACN4B,QAAQ5B,MAAM,SAAUA,OA8KtBuG,IARJ,SAWG7F,IACO,KAGZ,sBAAKrB,UAAU,iBAAf,UACE,uCACA,qBAAKA,UAAU,aACf,sBAAKA,UAAU,wBAAf,UACE,sBAAKA,UAAU,+BAAf,UACE,cAAC,IAAD,IACA,+CAGF,4BAAI,IAAImH,KAAK/G,EAAKgH,WAAWC,0BAE9BjH,EAAK+F,OAAS/F,EAAK+F,MAAMmB,SACxB,sBAAKtH,UAAU,wBAAf,UACE,sBAAKA,UAAU,+BAAf,UACE,cAAC,IAAD,IACA,6CAEF,4BAAII,EAAK+F,MAAMmB,aAGlBlH,EAAK+F,OAAS/F,EAAK+F,MAAMoB,MACxB,sBAAKvH,UAAU,wBAAf,UACE,sBAAKA,UAAU,+BAAf,UACE,cAAC,IAAD,IACA,yCAEF,4BAAII,EAAK+F,MAAMoB,UAGlBnH,EAAK+F,OAAS/F,EAAK+F,MAAMqB,OACxB,sBAAKxH,UAAU,wBAAf,UACE,sBAAKA,UAAU,+BAAf,UACE,cAAC,IAAD,IACA,gDAEF,4BAAII,EAAK+F,MAAMqB,WAGlBpH,EAAK+F,OAAS/F,EAAK+F,MAAMsB,QACxB,sBAAKzH,UAAU,wBAAf,UACE,sBAAKA,UAAU,+BAAf,UACE,cAAC,IAAD,IACA,4CAGF,4BAAII,EAAK+F,MAAMsB,qBAOZxH,I,wBCpUTyH,G,MAAcxH,IAAMC,MACxB,YAAqD,IAAlDsC,EAAiD,EAAjDA,OAAQpC,EAAyC,EAAzCA,UAAWD,EAA8B,EAA9BA,KAAME,EAAwB,EAAxBA,IAAKyF,EAAmB,EAAnBA,SAAU4B,EAAS,EAATA,GACnCC,EAAWC,aAAY,SAACC,GAAD,OAAWA,EAAMF,YAC9C,EAA0B5G,mBAAS,IAAnC,mBAAOiF,EAAP,KAAc8B,EAAd,KACA,EAAoCvH,cAA5BE,EAAR,EAAQA,QAASD,EAAjB,EAAiBA,QAASE,EAA1B,EAA0BA,MACpBqH,EAAWC,cACjB,EAA8BjH,oBAAS,GAAvC,mBAAgBkH,GAAhB,WACMC,EAAW,uCAAG,4BAAAxF,EAAA,+EAEWjC,EACzBiD,2CAAA,iBACYgE,EADZ,iBACuBtH,EAAYuH,EAASnF,OAASwD,EAAMxD,SAJ7C,QAEV2F,EAFU,QAMCpG,KAAKiE,MAAMxD,OAAS,GACnCyF,GAAW,GAET7H,EACF2H,EAAS,CAAE5C,KAAM,aAAchC,QAASgF,EAAapG,KAAKiE,QAE1D8B,GAAS,SAAC7D,GAAD,4BAAWA,GAAX,YAAiBkE,EAAapG,KAAKiE,WAZ9B,gDAehB1D,QAAQC,IAAR,KAAiB7B,GAfD,yDAAH,qDAqBjB,OAHAkB,qBAAU,WACRsG,MACC,IAED,sBAAKnI,UAAU,OAAf,WACIK,EAAYuH,EAAW3B,GAAOoC,KAAI,SAACC,GAAD,OAClC,cAAC,IAAD,CACEC,KAAK,OACLD,KAAMA,EAENvC,SAAUA,EACVzF,IAAKA,EACLkI,IAAKpI,EAAKwB,IACViC,MAAOzD,EAAKyD,OAJPyE,EAAK1G,QAQbnB,GACC,8BACE,cAAC,IAAD,OAGFA,IACEJ,GAAaoC,EAASmF,EAASnF,SAC7BpC,GAAaoC,EAASwD,EAAMxD,SAC9B,qBAAKzC,UAAU,WAAf,SACE,wBAAQA,UAAU,OAAOiE,QAASkE,EAAlC,sCASCT,IC5BAe,EApCU,WACxB,OAAO,sBAAKC,KAAG,EAAC1I,UAAU,OAAnB,UACN,sBAAKA,UAAU,qBAAf,UACI,sBAAKA,UAAU,6BAAf,UACA,qBAAKA,UAAU,qCAEf,0BAGJ,qBAAKA,UAAU,8BAEX,sBAAKA,UAAU,0BAAf,UACA,sBAAKA,UAAU,2BAAf,UACC,qBAAKA,UAAU,sCACf,oBAAIA,UAAU,uCACd,oBAAIA,UAAU,sCAEd,sBAAKA,UAAU,oCAAf,UACC,sBAAKA,UAAU,0CAAf,UACA,uBACA,0BAEA,qBAAKA,UAAU,aACf,sBAAKA,UAAU,4CAAf,UACC,uBACA,0BAEF,mBAAGA,UAAU,2CAId,cAAC,IAAD,IACA,cAAC,IAAD,IACA,cAAC,IAAD,Q,cC0CS2I,UArEC,SAACC,GACf,MAAoCpI,cAA5BC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,QACjB,GADA,EAA0BC,MACFK,mBAAS,OAAjC,mBAAOZ,EAAP,KAAayI,EAAb,KACA,EAAsB7H,mBAAS,MAA/B,mBAAOV,EAAP,KAAYC,EAAZ,KACMuI,EAAcjB,aAAY,SAACC,GAAD,OAAWA,EAAMgB,eAC3CnB,EAAKiB,EAAMG,MAAMC,OAAOrB,GAIxBsB,EAAgB,uCAAG,4BAAAtG,EAAA,+EAEHjC,EAChBiD,2CAAA,iBAA8CgE,IAH3B,OAEfzF,EAFe,OAKrB2G,EAAQ3G,EAAIF,KAAK5B,MACd8B,EAAIF,KAAK5B,MAAQ8B,EAAIF,KAAK5B,KAAK2F,WATnBL,EASyCxD,EAAIF,KAAK5B,KAAK2F,SARxEmD,SAASxD,MAAMA,GAEQ,gDAQrBnD,QAAQC,IAAR,MARqB,kCAHP,IAACkD,IAGM,oBAAH,qDAiBtB,GAHA7D,qBAAU,WACRoH,MACC,CAACtB,KACClH,GAAWL,GAAQA,EAAKwB,KAAOkH,GAAeA,EAAYjF,MAAO,CACpE,IAAMxD,EAAYyI,EAAYlH,MAAQxB,EAAKwB,IAC3C,OAAIvB,GAAkC,cAArBuI,EAAMG,MAAMR,KACpB,cAAC,IAAD,CAAUY,GAAE,mBAAc/I,EAAKwB,OAEnCvB,GAAkC,iBAArBuI,EAAMG,MAAMR,KAG5B,sBAAKvI,UAAS,kBAAaK,EAAY,OAAS,IAAhD,WACIA,GACA,sBAAKL,UAAU,kBAAf,UACE,qBACEA,UAAU,0BASZ,6BAAKI,EAAK2F,cAGd,cAAC,EAAD,CACE3F,KAAMA,EACNE,IAAKA,EACLC,OAjCU,SAACD,GACjBC,EAAOD,IAiCDD,UAAWA,IAEb,cAAC,EAAD,CACEoC,OAAQrC,EAAK6F,MAAMxD,OACnBrC,KAAM0I,EACNnB,GAAIA,EACJtH,UAAWA,EACXC,IAAKA,GAAOF,EAAKE,IACjByF,SAAU3F,EAAK2F,cA9BZ,cAAC,IAAD,CAAUoD,GAAE,gBAAWxB,KAmClC,OAAO,cAAC,EAAD,M,8GC1EIyB,EAAgB,WAC3B,MAAkCpI,oBAAS,GAA3C,mBAAOqI,EAAP,KAAkBC,EAAlB,KACA,EAA0BtI,qBAA1B,mBAAOL,EAAP,KAAc4I,EAAd,KAEMC,EAAqB1I,iBAAO,IAE5B2I,EAAcC,sBAAW,uCAC7B,WACEC,GADF,qCAAAhH,EAAA,6DAEEkE,EAFF,+BAEW,MACTE,EAHF,+BAGS,KACPD,EAJF,+BAIY,CAAE,eAAgB,oBAE5BwC,GAAa,GACPM,EAAgB,IAAIC,gBAC1BL,EAAmB5E,QAAQkF,KAAKF,GARlC,kBAW2B9H,MAAM6H,EAAK,CAChC9C,SACAE,OACAD,UACAiD,OAAQH,EAAcG,SAf5B,cAWU/C,EAXV,iBAkB+BA,EAAS/E,OAlBxC,WAkBUmG,EAlBV,OAoBIoB,EAAmB5E,QAAU4E,EAAmB5E,QAAQvC,QACtD,SAAA2H,GAAO,OAAIA,IAAYJ,KAGpB5C,EAASiD,GAxBlB,uBAyBY,IAAIC,MAAM9B,EAAarD,SAzBnC,eA4BIuE,GAAa,GA5BjB,kBA6BWlB,GA7BX,wCA+BImB,EAAS,KAAIxE,SACbuE,GAAa,GAhCjB,+DAD6B,sDAqC7B,IAcF,OAPAzH,qBAAU,WACR,OAAO,WAEL2H,EAAmB5E,QAAQuF,SAAQ,SAAAC,GAAS,OAAIA,EAAUC,cAE3D,IAEI,CAAEhB,YAAW1I,QAAO8I,cAAa7I,WAXrB,WACjB2I,EAAS,U,2JCsCEe,EA9EC,SAAC,GAA4B,IAA3B/B,EAA0B,EAA1BA,KAAKgC,EAAqB,EAArBA,SAAS7E,EAAY,EAAZA,MAAMiC,EAAM,EAANA,GACrC,EAA0CyB,cAAlCC,EAAR,EAAQA,UAAkBI,GAA1B,EAAmB9I,MAAnB,EAA0B8I,aAC1B,EAAyBzI,oBAAS,GAAlC,mBAAOwJ,EAAP,KAAcC,EAAd,KACMzC,EAAWC,cACXpE,EAAQgE,aAAY,SAAAC,GAAK,OAAEA,EAAM4C,cAChC1F,EAAa,WACdwF,IACDC,GAAU,GACTvB,SAASnC,KAAKzC,MAAMqG,UAAU,SAS9BC,EAAU,uCAAE,sBAAAjI,EAAA,+EAEP8G,EACL9F,2CAAA,iBAA4CgE,GAC3C,SAAS,KAAK,CACd,eAAgB,mBAChB/D,cAAc,UAAWC,IANd,OASbmE,EAAS,CAAC5C,KAAK,cAAchC,QAAQuE,IACrCpF,QAAQC,IAAImF,GACRY,EAINP,EAAS,CAAC5C,KAAK,mBAAmBhC,QAAQuE,IAHtCkD,IAAQf,KAAK,IAKjB9E,IAjBe,yGAAF,qDAoBjB,OACQ,qCACH,qBAAKV,MAAO,CAACa,QAAQ,gBAAiBlB,QA5BzB,WACVuG,IACFC,GAAU,GACVvB,SAASnC,KAAKzC,MAAMqG,UAAU,WAyB/B,SAA2DJ,IAC1D,cAACO,EAAA,EAAD,CACEC,GAAIP,EACJQ,QAAS,IACTC,WAAW,QACXC,eAAa,EAJf,SAMJ,qBAAKlL,UAAU,mBAAmBiE,QAASe,EAA3C,SACO,qBAAKhF,UAAU,QAAf,SACG,qBAAKA,UAAU,cAAciE,QAAS,SAACC,GAAD,OAAKA,EAAEC,mBAA7C,SACC,qBAAInE,UAAU,cAAd,UACC,oBAAIA,UAAU,cAAd,SACC,cAAC,IAAD,CAAMiE,QAASe,EAAYmE,GAAI,CACtBgC,SAAS,eAAD,OAAgBxD,GACxBG,MAAM,CAACpC,UAFhB,yBAQD,oBAAI1F,UAAU,qBAAqBiE,QAAS,WAC3C2G,KADD,SAKEvB,EAAY,cAAe,gBAE7B,oBAAIrJ,UAAU,cAAciE,QAASe,EAArC,+BAQLqE,GAAa,cAAC,IAAD,Q,2CC/ED+B,G,yDACnB,WAAYxC,GAAQ,uCACZA,G,0CAGR,WACE,MAA8ByC,KAAKzC,MAA5B0C,EAAP,EAAOA,MAAMC,EAAb,EAAaA,cAEb,OACE,8BACI,cAAC,IAAD,CACEC,QAASF,EACTG,eAAgBF,U,GAZgBG,c,iCC8K7BC,IAxKE,SAAC,GAA+C,IAAD,cAA5CrD,EAA4C,EAA5CA,KAAMC,EAAsC,EAAtCA,KAAMC,EAAgC,EAAhCA,IAAK3E,EAA2B,EAA3BA,MAAOvD,EAAoB,EAApBA,IAAKyF,EAAe,EAAfA,SAC/C,EAA0B/E,mBAASsH,EAAKsD,MAAMC,QAAQrD,IAAtD,mBAAOoD,EAAP,KAAcE,EAAd,KACMC,EAAMjL,iBAAOwH,EAAKsD,MAAMnJ,QACxBuJ,EAAOlL,iBAAO,MACZ2I,EAAgBL,cAAhBK,YACR,EAA4BzI,oBAAS,GAArC,mBAAOwJ,EAAP,KAAeC,EAAf,KAWMwB,GARH,IAQa,uCAAG,4BAAAtJ,EAAA,+EAEI8G,EACjB9F,sDACA,QACAnC,KAAKwC,UAAU,CACbkI,OAAQ5D,EAAK1G,IACbuK,QAAS3D,EACTlI,MACAyF,aAEF,CACE,eAAgB,mBAChBnC,cAAe,UAAYC,IAbhB,OAETuI,EAFS,OAiBfC,IAAOC,KAAK,SAAZ,2BACKF,GADL,IAEEhH,KAAM,gBAnBO,gDAsBf7C,QAAQC,IAAR,MAtBe,yDAAH,sDA0BhB,EAAoBxB,qBAApB,mBAAO2G,EAAP,UAEA9F,qBAAU,WACR,GAAImK,EAAKpH,QAAS,CAChB,IAAM2H,EAAQC,YAAW,WACvBP,MACC,KACH,OAAO,kBAAMQ,aAAaF,OAE3B,CAACX,IA6BJ,OACE,sBAAK5L,UAAU,OAAf,UACGwK,GACC,cAAC,EAAD,CAAec,MAAOd,EAAQe,cAAe,kBAAMd,GAAU,MAO/D,sBAAKzK,UAAU,eAAf,UACE,sBAAKA,UAAU,qBAAf,UACE,sBAAKA,UAAU,oBAAf,WACG,UAAAsI,EAAK6D,eAAL,eAAcO,WAAY,qBAAK1M,UAAU,eAC1C,cAAC,IAAD,CAAMmJ,GAAE,iBAAe,OAAJb,QAAI,IAAJA,GAAA,UAAAA,EAAM6D,eAAN,eAAevK,MAAO0G,EAAK6D,SAA9C,SACE,qBAAK9H,KAAS,OAAJiE,QAAI,IAAJA,GAAA,UAAAA,EAAM6D,eAAN,eAAe7L,MAAOA,EAAKuF,IAAI,YAG7C,sBAAK7F,UAAU,qBAAf,UACE,cAAC,IAAD,CAAMmJ,GAAE,iBAAW,UAAAb,EAAK6D,eAAL,eAAcvK,MAAO0G,EAAK6D,SAA7C,SACE,sBAAMnM,UAAU,OAAhB,UAAwB,UAAAsI,EAAK6D,eAAL,eAAcpG,WAAYA,MAEjC,SAAlBuC,EAAKqE,UACJ,sBAAM3M,UAAU,QAAhB,SAAyBsI,EAAKqE,iBAInCnE,MAAS,UAAAF,EAAK6D,eAAL,eAAcvK,KAAd,UAAoB0G,EAAK6D,eAAzB,aAAoB,EAAcvK,IAAM0G,EAAK6D,UACrD,cAAC,EAAD,CACA5D,KAAMA,EACNZ,GAAIA,GAAMW,EAAK1G,IACf8D,MAAO4C,EAAK5C,MAHZ,SAKA,qBAAK1F,UAAU,aAAf,SACE,sBAAMA,UAAU,OAAhB,SACE,cAAC,IAAD,CAAQyD,MAAM,SAASC,OAAO,SAASoC,KAAK,kBAMnDwC,EAAK5C,OACJ,qBAAK1F,UAAU,gBAAf,SACE,4BAAIsI,EAAK5C,MAAQ4C,EAAK5C,MAAQ,SAGjC4C,EAAKhI,KACJ,qBAAKN,UAAU,aAAf,SACE,qBAAKqE,IAAKiE,EAAKhI,IAAK2D,QAAS,kBAAMwG,EAAUnC,EAAKhI,UAGtD,sBAAKN,UAAU,aAAf,UACE,sBAAKA,UAAU,4BAAf,UACE,sBAAKA,UAAU,kCAAf,UACE,sBACEA,UAAU,OACViE,QAAS,WACP2H,EAAQ,IAAMG,EAAInH,UAAYmH,EAAInH,QAClCkH,GAAS,SAAC5H,GAAD,OAAc,IAANA,GAAW,GAAS,EAALA,KAC3B8H,EAAKpH,UAASoH,EAAKpH,QAAU,IALtC,SAQGgH,EAAQ,EACP,cAAC,IAAD,CAAOnI,MAAM,OAAOC,OAAO,OAAOoC,KAAK,SAEvC,cAAC,IAAD,CAASrC,MAAM,OAAOC,OAAO,OAAOoC,KAAK,WAG7C,sBAAM9F,UAAU,MAAhB,SAAuB+L,EAAInH,aAE7B,cAAC,IAAD,CAAMuE,GAAE,gBAAWb,EAAK1G,KAAxB,SACE,sBAAK5B,UAAU,kCAAf,UACE,sBAAMA,UAAU,OAAhB,SACE,cAAC,IAAD,CAAUyD,MAAM,OAAOC,OAAO,OAAOoC,KAAK,WAE5C,sBAAM9F,UAAU,MAAhB,SACGsI,EAAKsE,SAAWtE,EAAKsE,SAASnK,OAAS,YAKhD,qBAAKzC,UAAU,wBAAf,SA7Gc,SAAC6M,GACnB,IAAMC,EAAM,IAAI3F,KACV4F,EAAW,IAAI5F,KAAK0F,GAASG,UAC7BC,GAAaH,EAAIE,UAAYD,GAAjB,KAClB,GAAIE,EAAY,EAAG,CACjB,IAAIC,EAAIC,KAAKC,KAAiB,GAAZH,GAClB,OAAOC,GAAW,IAANA,EAAU,UAAY,YAAc,OAElD,GAAID,EAAY,GAAI,CAClB,IAAIC,EAAIC,KAAKE,MAAMJ,GACnB,OAAOC,GAAW,IAANA,EAAU,QAAU,UAAY,OAE9C,GAAID,EAAY,IAAQ,CACtB,IAAIC,EAAIC,KAAKE,MAAMJ,EAAY,IAC/B,OAAOC,aAET,GAAID,EAAY,IAAS,CACvB,IAAIC,EAAIC,KAAKE,MAAMJ,EAAS,KAC5B,OAAOC,GAAW,IAANA,EAAU,QAAU,UAAY,OAE9C,GAAID,EAAY,KAAU,CACxB,IAAIC,EAAIC,KAAKE,MAAMJ,EAAS,KAC5B,OAAOC,GAAW,IAANA,EAAU,SAAW,WAAa,OAE9C,IAAIA,EAAIC,KAAKE,MAAMJ,EAAS,MAC5B,OAAOC,GAAW,IAANA,EAAU,QAAU,UAAY,OAqFvCI,CAAYhF,EAAKlB,kBAjFGkB,EAAK1G","file":"static/js/13.c33d4818.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst PostPlaceholder = ()=>{\r\n\treturn <div className=\"post-placeholder\">\r\n       <div className=\"post-placeholder__header\">\r\n           <div className=\"post-placeholder__img\"></div> \r\n           <div className=\"post-placeholder__info\">\r\n           <div className=\"post-placeholder__username\"></div> \r\n            <div className=\"post-placeholder__name\"></div> \r\n          </div>\r\n       </div>\r\n       <div className=\"post-placeholder__content\">\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n       </div>\r\n       <div className=\"post-placeholder__tail\">\r\n       <div className=\"post-placeholder__like\"></div>\r\n       <div className=\"post-placeholder__time\"></div>\r\n       </div>\r\n\t</div>\r\n}\r\nexport default PostPlaceholder;","import React, { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n  Clock,\r\n  Place,\r\n  Camera,\r\n  User,\r\n  Birth,\r\n  Home_3 as Home,\r\n} from \"../../../assets/icons/icons\";\r\nimport Loading from \"../../../shared/loading.js\";\r\nimport LoadingPage from \"../../../shared/models/loading-modal\";\r\nimport ErrorModal from \"../../../shared/models/error-model\";\r\nimport { useFetch } from \"../../../shared/hooks/useFetch\";\r\nimport Cropper from \"react-cropper\";\r\nimport \"cropperjs/dist/cropper.css\";\r\nimport Button from \"@mui/material/Button\";\r\n\r\nconst ProfileBoard = React.memo(({ user, isProfile, img, setImg }) => {\r\n  const { loading, request, error, clearError } = useFetch();\r\n  const filePickerRef = useRef();\r\n  const CropperRef = useRef(0);\r\n  const [crop, setCrop] = useState(false);\r\n  const [files, setFiles] = useState();\r\n  const [friendState, setFriendState] = useState(\"Add Friend\");\r\n \r\n  const userId=  JSON.parse(localStorage.getItem(\"userData2\"))._id;\r\n  \r\n  \r\n  useEffect( () => {\r\n  \r\n\r\n    fetch(`https://socialbackends.herokuapp.com/allUser/${userId}`).then(data=>data.json()).then(res=>{\r\n\r\n\r\n      if(res!=null){\r\n\r\n      \r\n      const loggedInUserFriends = res.friends;\r\n      const friendId = loggedInUserFriends.filter((friend) => {\r\n        return friend == user._id;\r\n      });\r\n      console.log(friendState,friendId)\r\n      if (friendId.length >= 1) {\r\n        setFriendState(\"Unfriend\");\r\n      } else setFriendState(\"Add Friend\");\r\n\r\n    }\r\n    else setFriendState(\"Add Friend\");\r\n\r\n\r\n\r\n      })\r\n    }, [])\r\n\r\n  const togleFriend = () => {\r\n    //make friend\r\n    if (friendState == \"Add Friend\") {\r\n      const data = {\r\n        addFrndId: JSON.parse(localStorage.getItem(\"userData2\"))._id,\r\n        frndId: user._id,\r\n      };\r\n      console.log(data);\r\n      fetch(`https://socialbackends.herokuapp.com/updateFriends`, {\r\n        method: \"PATCH\", // or 'PATCH'\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(data),\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(\"Success:\", data);\r\n          setFriendState(\"UnFriend\")\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error:\", error);\r\n        });\r\n    }\r\n    //unfriend\r\n    else {\r\n      const data = {\r\n        addFrndId: JSON.parse(localStorage.getItem(\"userData2\"))._id,\r\n        frndId: user._id,\r\n      };\r\n   \r\n      fetch(`https://socialbackends.herokuapp.com/updateunFriends`, {\r\n        method: \"PATCH\", // or 'PATCH'\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(data),\r\n      })\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          console.log(\"Success:\", data);\r\n          setFriendState(\"Add Friend\")\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error:\", error);\r\n        });\r\n    }\r\n  };\r\n  const pickedHandler = (event) => {\r\n    let pickedFile;\r\n    if (event.target.files && event.target.files.length === 1) {\r\n      pickedFile = event.target.files[0];\r\n      setFiles(pickedFile);\r\n    }\r\n  };\r\n  const previewImg = async () => {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      setCrop(fileReader.result);\r\n    };\r\n    fileReader.readAsDataURL(files);\r\n  };\r\n  const changeImg = async (imgData) => {\r\n    const dataset = JSON.parse(localStorage.getItem(\"userData2\"));\r\n    const payload = new FormData();\r\n    payload.append(\"x\", imgData.x);\r\n    payload.append(\"y\", imgData.y);\r\n    payload.append(\"width\", imgData.width);\r\n    payload.append(\"height\", imgData.height);\r\n    payload.append(\"img\", files);\r\n    try {\r\n      const respond = await request(\r\n        process.env.REACT_APP_BACKEND_URL + `/users/img/${user._id}`,\r\n        \"post\",\r\n        payload,\r\n        {\r\n          Authorization: \"Bearer \" + user.token,\r\n        }\r\n      );\r\n      setImg(respond.data.img);\r\n      localStorage.setItem(\r\n        \"userData2\",\r\n        JSON.stringify({\r\n          ...dataset,\r\n          img: respond.data.img,\r\n        })\r\n      );\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (!files) {\r\n      return;\r\n    }\r\n    previewImg();\r\n    // changeImg();\r\n  }, [files]);\r\n\r\n  const pickImageHandler = () => {\r\n    filePickerRef.current.click();\r\n  };\r\n  return (\r\n    <div>\r\n      {loading && <LoadingPage />}\r\n      {crop && (\r\n        <div className=\"modal__container\">\r\n          <div className=\"modal\">\r\n            <div\r\n              className=\"modal__body cropper\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <Cropper\r\n                ref={CropperRef}\r\n                src={crop}\r\n                style={{ height: \"80vh\", width: \"100%\" }}\r\n                // Cropper.js options\r\n                zoomable={false}\r\n                aspectRatio={1}\r\n                viewMode={2}\r\n                responsive={true}\r\n                guides={false}\r\n              />\r\n              <div className=\"modal__footer\">\r\n                <button\r\n                  className=\"btn btn--outlined-danger\"\r\n                  onClick={() => setCrop(false)}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  className=\"btn btn--contained-success\"\r\n                  onClick={() => {\r\n                    setCrop(null);\r\n                    changeImg(CropperRef.current.cropper.getData());\r\n                  }}\r\n                >\r\n                  Submit\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {error && (\r\n        <ErrorModal\r\n          message=\"there was a problem with the image!\"\r\n          closeModal={clearError}\r\n        />\r\n      )}\r\n      <div\r\n        className=\"profile__cover\"\r\n        style={{\r\n          backgroundImage: `url(${\r\n            user.cover\r\n              ? user.cover\r\n              : \"https://cdn.dribbble.com/users/648922/screenshots/9157929/media/e5d45686a9feeefaff2780443188a2d8.png\"\r\n          })`,\r\n        }}\r\n      ></div>\r\n      <div className=\"profile__row\">\r\n        {isProfile && (\r\n          <input\r\n            ref={filePickerRef}\r\n            style={{ display: \"none\" }}\r\n            type=\"file\"\r\n            accept=\".png,.jpg,.jpeg\"\r\n            onChange={pickedHandler}\r\n          />\r\n        )}\r\n        <div className=\"profile__info\">\r\n          <div\r\n            className=\"profile__info__picture\"\r\n            title=\"Change your image\"\r\n            style={{ cursor: `${isProfile ? \"pointer\" : \"default\"}` }}\r\n            onClick={isProfile ? pickImageHandler : null}\r\n          >\r\n            <img src={img || user.img} alt=\"aa\" />\r\n            {isProfile && (\r\n              <div className=\"profile__info__picture--icon\">\r\n                <Camera fill=\"#fff\" width=\"2rem\" height=\"2rem\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n          <h2 className=\"profile__info__username\">{user.username}</h2>\r\n          <h2 className=\"profile__info__name\">{user.name}</h2>\r\n        </div>\r\n\r\n        <div className=\"profile__info__statics\">\r\n          <div className=\"profile__info__statics--head\">\r\n            <h3>posts</h3>\r\n            <h3>chat Friends</h3>\r\n          </div>\r\n\r\n          <div className=\"seprator\" />\r\n          <div className=\"profile__info__statics--result\">\r\n            <h3>{user.posts.length}</h3>\r\n            <h3>{user.chatRooms.length}</h3>\r\n          </div>\r\n          {user.about && user.about.bio && (\r\n            <p className=\"profile__info__bio\">{user.about.bio}</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"add_frnd_btn\"\r\n        style={{ marginTop: \"20px\", width: \"200px\", marginLeft: \"20px\" }}\r\n      >\r\n\r\n        {user._id!=userId?\r\n        <Button\r\n          variant=\"contained\"\r\n          style={{\r\n            width: \"100px!important\",\r\n            fontSize: \"15px\",\r\n            borderRadius: \"10px\",\r\n          }}\r\n          onClick={() => {\r\n            togleFriend();\r\n          }}\r\n        >\r\n          {friendState}\r\n        </Button>:\"\"}\r\n      </div>\r\n\r\n      <div className=\"profile__about\">\r\n        <h2>About</h2>\r\n        <div className=\"seprator\" />\r\n        <div className=\"profile__about__field\">\r\n          <div className=\"profile__about__field__quest\">\r\n            <Clock />\r\n            <h4>Joined at </h4>\r\n          </div>\r\n\r\n          <p>{new Date(user.createdAt).toLocaleDateString()}</p>\r\n        </div>\r\n        {user.about && user.about.livesIn && (\r\n          <div className=\"profile__about__field\">\r\n            <div className=\"profile__about__field__quest\">\r\n              <Place />\r\n              <h4>lives in</h4>\r\n            </div>\r\n            <p>{user.about.livesIn}</p>\r\n          </div>\r\n        )}\r\n        {user.about && user.about.from && (\r\n          <div className=\"profile__about__field\">\r\n            <div className=\"profile__about__field__quest\">\r\n              <Home />\r\n              <h4>from</h4>\r\n            </div>\r\n            <p>{user.about.from}</p>\r\n          </div>\r\n        )}\r\n        {user.about && user.about.birth && (\r\n          <div className=\"profile__about__field\">\r\n            <div className=\"profile__about__field__quest\">\r\n              <Birth />\r\n              <h4>was born on</h4>\r\n            </div>\r\n            <p>{user.about.birth}</p>\r\n          </div>\r\n        )}\r\n        {user.about && user.about.gender && (\r\n          <div className=\"profile__about__field\">\r\n            <div className=\"profile__about__field__quest\">\r\n              <User />\r\n              <h4>gender </h4>\r\n            </div>\r\n\r\n            <p>{user.about.gender}</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nexport default ProfileBoard;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PostItem from \"../../posts/post-item\";\r\nimport { useFetch } from \"../../../shared/hooks/useFetch\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport PostPlaceholer from \"../../placeholders/post-placeholder\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst ProfileFeed = React.memo(\r\n  ({ length, isProfile, user, img, username, id }) => {\r\n    const userPost = useSelector((state) => state.userPost);\r\n    const [posts, setPosts] = useState([]);\r\n    const { request, loading, error } = useFetch();\r\n    const dispatch = useDispatch();\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const handlePosts = async () => {\r\n      try {\r\n        const responseData = await request(\r\n          process.env.REACT_APP_BACKEND_URL +\r\n            `/users/${id}?skip=${isProfile ? userPost.length : posts.length}`\r\n        );\r\n        if (responseData.data.posts.length < 5) {\r\n          setHasMore(false);\r\n        }\r\n        if (isProfile) {\r\n          dispatch({ type: \"MORE_POSTS\", payload: responseData.data.posts });\r\n        } else {\r\n          setPosts((e) => [...e, ...responseData.data.posts]);\r\n        }\r\n      } catch (err) {\r\n        console.log(err, error);\r\n      }\r\n    };\r\n    useEffect(() => {\r\n      handlePosts();\r\n    }, []);\r\n    return (\r\n      <div className=\"mt-5\">\r\n        {(isProfile ? userPost : posts).map((post) => (\r\n          <PostItem\r\n            path=\"stay\"\r\n            post={post}\r\n            key={post._id}\r\n            username={username}\r\n            img={img}\r\n            uid={user._id}\r\n            token={user.token}\r\n          />\r\n        ))}\r\n\r\n        {loading && (\r\n          <div>\r\n            <PostPlaceholer />\r\n          </div>\r\n        )}\r\n        {!loading &&\r\n          ((isProfile && length > userPost.length) ||\r\n            (!isProfile && length > posts.length)) && (\r\n            <div className=\"has-more\">\r\n              <button className=\"nude\" onClick={handlePosts}>\r\n                Load More Posts\r\n              </button>\r\n            </div>\r\n          )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\nexport default ProfileFeed;\r\n","import React from 'react';\r\nimport PostPlaceholer  from './post-placeholder'\r\n\r\nconst ProfilePlaceholder=()=>{\r\n\treturn <div div className=\"mt-5\">\r\n\t\t<div className=\"profile-placehoder\">\r\n      <div className=\"profile-placehoder__header\">\r\n      <div className=\"profile-placehoder__header--icon\">\r\n      </div> \r\n      <h2>\r\n      </h2>  \r\n      </div>\r\n  <div className=\"profile-placehoder__cover\">\r\n      </div>\r\n      <div className=\"profile-placehoder__row\">\r\n      <div className=\"profile-placehoder__info\">\r\n       <div className=\"profile-placehoder__info__picture\"></div>\r\n       <h2 className=\"profile-placehoder__info__username\"></h2>\r\n       <h2 className=\"profile-placehoder__info__name\"></h2>\r\n       </div>\r\n       <div className=\"profile-placehoder__info__statics\">\r\n        <div className=\"profile-placehoder__info__statics--head\">\r\n        <h3></h3>\r\n        <h3></h3> \r\n        </div>\r\n        <div className=\"seprator\" />\r\n        <div className=\"profile-placehoder__info__statics--result\">\r\n         <h3></h3>\r\n         <h3></h3>\r\n       </div>\r\n       <p className=\"profile-placehoder__info__bio\"></p>\r\n      </div>\r\n      </div>\r\n      </div>\r\n      <PostPlaceholer />\r\n      <PostPlaceholer />\r\n      <PostPlaceholer />\r\n\t</div>\r\n}\r\nexport default ProfilePlaceholder;","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useFetch } from \"../../../shared/hooks/useFetch\";\r\nimport ProfileBoard from \"./profile-board\";\r\nimport ProfileFeed from \"./profile-feed\";\r\nimport ProfilePlaceholer from \"../../placeholders/profile-placehoder\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport history from \"../../../history\";\r\n\r\nconst Profile = (props) => {\r\n  const { loading, request, error } = useFetch();\r\n  const [user, setUser] = useState(null);\r\n  const [img, setImg] = useState(null);\r\n  const currentUser = useSelector((state) => state.currentUser);\r\n  const id = props.match.params.id;\r\n  const changeTitle=(title)=>{\r\n    document.title=title;\r\n  }\r\n  const fetchProfileData = async () => {\r\n    try {\r\n      const res = await request(\r\n        process.env.REACT_APP_BACKEND_URL + `/users/${id}`\r\n      );\r\n      setUser(res.data.user);\r\n      if(res.data.user && res.data.user.username) changeTitle(res.data.user.username);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const changeImg = (img) => {\r\n    setImg(img);\r\n  };\r\n  useEffect(() => {\r\n    fetchProfileData();\r\n  }, [id]);\r\n  if (!loading && user && user._id && currentUser && currentUser.token) {\r\n    const isProfile = currentUser._id === user._id;\r\n    if (isProfile && props.match.path === \"/user/:id\") {\r\n      return <Redirect to={`/profile/${user._id}`} />;\r\n    }\r\n    if (!isProfile && props.match.path === \"/profile/:id\")\r\n      return <Redirect to={`/user/${id}`} />;\r\n    return (\r\n      <div className={`profile ${isProfile ? \"mt-2\" : \"\"}`}>\r\n        {!isProfile && (\r\n          <div className=\"profile__header\">\r\n            <div\r\n              className=\"profile__header--icon\"\r\n              // onClick={() => history.goBack()}\r\n            >\r\n              {/* <svg viewBox=\"0 0 24 24\">\r\n                <g>\r\n                  <path d=\"M20 11H7.414l4.293-4.293c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414l6 6c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L7.414 13H20c.553 0 1-.447 1-1s-.447-1-1-1z\"></path>\r\n                </g>\r\n              </svg> */}\r\n            </div>\r\n            <h2>{user.username}</h2>\r\n          </div>\r\n        )}\r\n        <ProfileBoard\r\n          user={user}\r\n          img={img}\r\n          setImg={changeImg}\r\n          isProfile={isProfile}\r\n        />\r\n        <ProfileFeed\r\n          length={user.posts.length}\r\n          user={currentUser}\r\n          id={id}\r\n          isProfile={isProfile}\r\n          img={img || user.img}\r\n          username={user.username}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  return <ProfilePlaceholer />;\r\n};\r\nexport default Profile;\r\n","import { useState, useCallback, useRef, useEffect } from \"react\";\r\n\r\nexport const useHttpClient = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState();\r\n\r\n  const activeHttpRequests = useRef([]);\r\n\r\n  const sendRequest = useCallback(\r\n    async (\r\n      url,\r\n      method = \"GET\",\r\n      body = null,\r\n      headers = { \"Content-Type\": \"application/json\" }\r\n    ) => {\r\n      setIsLoading(true);\r\n      const httpAbortCtrl = new AbortController();\r\n      activeHttpRequests.current.push(httpAbortCtrl);\r\n\r\n      try {\r\n        const response = await fetch(url, {\r\n          method,\r\n          body,\r\n          headers,\r\n          signal: httpAbortCtrl.signal\r\n        });\r\n\r\n        const responseData = await response.json();\r\n\r\n        activeHttpRequests.current = activeHttpRequests.current.filter(\r\n          reqCtrl => reqCtrl !== httpAbortCtrl\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(responseData.message);\r\n        }\r\n\r\n        setIsLoading(false);\r\n        return responseData;\r\n      } catch (err) {\r\n        setError(err.message);\r\n        setIsLoading(false);\r\n        throw err;\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const clearError = () => {\r\n    setError(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      activeHttpRequests.current.forEach(abortCtrl => abortCtrl.abort());\r\n    };\r\n  }, []);\r\n\r\n  return { isLoading, error, sendRequest, clearError };\r\n};\r\n","import React,{useState} from 'react';\r\nimport Slide from 'react-reveal/Slide';\r\nimport {Link} from 'react-router-dom';\r\nimport {useHttpClient} from '../../shared/hooks/http-hook';\r\nimport {useDispatch,useSelector} from 'react-redux';\r\nimport LoadindModal from './loading-modal'\r\nimport history from '../../history'\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nconst PostModel=({path,children,title,id})=>{\r\n const { isLoading, error, sendRequest } = useHttpClient();\r\n const [isOpen,setIsOpen]=useState(false);\r\n const dispatch = useDispatch();\r\n const token = useSelector(state=>state.isSignedIn)\r\n  const closeModal = ()=>{\r\n    if(isOpen){\r\n      setIsOpen(false);\r\n       document.body.style.overflowY='auto';\r\n    }\r\n  }\r\n  const openModal=()=>{\r\n    if(!isOpen){\r\n      setIsOpen(true);\r\n      document.body.style.overflowY='hidden';\r\n    }\r\n  }\r\n const deletePost= async ()=>{\r\n    try {\r\n      await sendRequest(\r\n       process.env.REACT_APP_BACKEND_URL+`/posts/${id}`,\r\n        'DELETE',null,{\r\n        'Content-Type': 'application/json',\r\n        Authorization:'Bearer '+ token\r\n     }\r\n      );    \r\n      dispatch({type:'DELETE_POST',payload:id});\r\n      console.log(id)\r\n      if(!path){\r\n        history.push('');\r\n    }\r\n    else{\r\n    dispatch({type:'DELETE_USER_POST',payload:id});\r\n    }\r\n    closeModal();\r\n    } catch (err) {}\r\n}\t\r\nreturn (\r\n        <>\r\n     <div style={{display:'inline-block'}} onClick={openModal}>{children}</div>\r\n      <CSSTransition\r\n        in={isOpen}\r\n        timeout={300}\r\n        classNames=\"modal\"\r\n        unmountOnExit\r\n      >\r\n\t\t<div className=\"modal__container\" onClick={closeModal}>\r\n         <div className=\"modal\">\r\n            <div className=\"modal__body\" onClick={(e)=>e.stopPropagation()} >\r\n             <ul className=\"modal__list\">\r\n             \t<li className=\"modal__item\">\r\n             \t\t<Link onClick={closeModal} to={{\r\n                        pathname:`/posts/edit/${id}`,\r\n                        state:{title}\r\n                         }}\r\n                         >\r\n             \t\tEdit Post\r\n             \t\t</Link>\r\n             \t</li>\r\n             \t<li className=\"modal__item delete\" onClick={()=>{\r\n             \t\tdeletePost();\r\n             \t\t\t\r\n             \t\t\t\r\n             \t}}>\r\n             \t\t{isLoading ? 'Deleting...' :'Delete Post'}\r\n             \t</li>\r\n             \t<li className=\"modal__item\" onClick={closeModal}>\r\n             \t\tCancel\r\n             \t</li>\r\n             </ul>\r\n            </div>\r\n         </div>\r\n\t\t</div>\r\n        </CSSTransition>\r\n        {isLoading && <LoadindModal />}\r\n        </>\r\n\t\t)\r\n}\r\nexport default PostModel;","import React,{Component} from 'react';\r\nimport Lightbox from 'react-image-lightbox';\r\nimport 'react-image-lightbox/style.css';\r\n\r\nexport default class LightboxImages extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n \r\n  }\r\n  render() {\r\n    const {image,closeLightBox} = this.props\r\n\r\n    return (\r\n      <div>      \r\n          <Lightbox\r\n            mainSrc={image}\r\n            onCloseRequest={closeLightBox}              \r\n          />\r\n      </div>\r\n    );\r\n  }\r\n}","import React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { Menu_2, Heart, Heart_4, Comment2 } from \"../../assets/icons/icons\";\r\nimport PostModel from \"../../shared/models/post-model\";\r\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LightBoxImage from \"./image-preview\";\r\nimport socket from \"../socket\";\r\nimport AwesomeSlider from 'react-awesome-slider';\r\nimport 'react-awesome-slider/dist/styles.css';\r\n\r\nconst PostItem = ({ post, path, uid, token, img, username }) => {\r\n  const [liked, setLiked] = useState(post.liked.indexOf(uid));\r\n  const nol = useRef(post.liked.length);\r\n  const test = useRef(null);\r\n  const { sendRequest } = useHttpClient();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const slider = (\r\n    <AwesomeSlider>\r\n      <div>1</div>\r\n      <div>2</div>\r\n      <div>3</div>\r\n      <div>4</div>\r\n    </AwesomeSlider>\r\n  );\r\n\r\n  const handleLike = async () => {\r\n    try {\r\n      const like = await sendRequest(\r\n        process.env.REACT_APP_BACKEND_URL + \"/posts/post\",\r\n        \"PATCH\",\r\n        JSON.stringify({\r\n          postId: post._id,\r\n          creator: uid,\r\n          img,\r\n          username,\r\n        }),\r\n        {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + token,\r\n        }\r\n      );\r\n\r\n      socket.emit(\"action\", {\r\n        ...like,\r\n        type: \"SEND_NOTFY\",\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  \r\n  const [id, setId] = useState();\r\n  \r\n  useEffect(() => {\r\n    if (test.current) {\r\n      const timer = setTimeout(() => {\r\n        handleLike();\r\n      }, 500);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [liked]);\r\n  const getLeftTime = (oldTime) => {\r\n    const now = new Date();\r\n    const leftTime = new Date(oldTime).getTime();\r\n    const leftHours = (now.getTime() - leftTime) / (1000 * 3600);\r\n    if (leftHours < 1) {\r\n      let t = Math.ceil(leftHours * 60);\r\n      return t + (t === 1 ? \" MINUTE\" : \" MINUTES\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24) {\r\n      let t = Math.floor(leftHours);\r\n      return t + (t === 1 ? \" Hour\" : \" Hours\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24 * 7) {\r\n      let t = Math.floor(leftHours / 24);\r\n      return t + (t === 1 ? \" Day\" : \" Day\") + \" AGO\";\r\n    }\r\n    if (leftHours < 24 * 30) {\r\n      let t = Math.floor(leftHours / (24 * 7));\r\n      return t + (t === 1 ? \" Week\" : \" Weeks\") + \" AGO\";\r\n    }\r\n    if (leftHours < 365 * 24) {\r\n      let t = Math.floor(leftHours / (24 * 30));\r\n      return t + (t === 1 ? \" Month\" : \" Months\") + \" AGO\";\r\n    } else {\r\n      let t = Math.floor(leftHours / (365 * 24));\r\n      return t + (t === 1 ? \" Year\" : \" Years\") + \" AGO\";\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"post\" key={post._id}>\r\n      {isOpen && (\r\n        <LightBoxImage image={isOpen} closeLightBox={() => setIsOpen(false)} />\r\n      )}\r\n      \r\n\r\n     \r\n\r\n\r\n      <div className=\"post__header\">\r\n        <div className=\"post__header--info\">\r\n          <div className=\"post__header--img\">\r\n            {post.creator?.isOnline && <div className=\"userActive\"></div>}\r\n            <Link to={`/user/${post?.creator?._id || post.creator}`}>\r\n              <img src={post?.creator?.img || img} alt=\"aa\" />\r\n            </Link>\r\n          </div>\r\n          <div className=\"post__header--name\">\r\n            <Link to={`/user/${post.creator?._id || post.creator}`}>\r\n              <span className=\"name\">{post.creator?.username || username}</span>\r\n            </Link>\r\n            {post.location !== \"null\" && (\r\n              <span className=\"place\">{post.location}</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {uid === (post.creator?._id ? post.creator?._id : post.creator) && (\r\n          <PostModel\r\n          path={path}\r\n          id={id || post._id}\r\n          title={post.title}\r\n          >\r\n          <div className=\"post__menu\">     \r\n            <span className=\"icon\">\r\n              <Menu_2 width=\"2.3rem\" height=\"2.3rem\" fill=\"#fff\" />\r\n            </span>\r\n          </div>\r\n          </PostModel>\r\n        )}\r\n      </div>\r\n      {post.title && (\r\n        <div className=\"post__content\">\r\n          <p>{post.title ? post.title : null}</p>\r\n        </div>\r\n      )}\r\n      {post.img && (\r\n        <div className=\"post__body\">\r\n          <img src={post.img} onClick={() => setIsOpen(post.img)} />\r\n        </div>\r\n      )}\r\n      <div className=\"post__tail\">\r\n        <div className=\"post__tail__communication\">\r\n          <div className=\"post__tail__communication__item\">\r\n            <span\r\n              className=\"icon\"\r\n              onClick={() => {\r\n                liked < 0 ? ++nol.current : --nol.current;\r\n                setLiked((e) => (e === 0 ? -1 : e * -1));\r\n                if (!test.current) test.current = 1;\r\n              }}\r\n            >\r\n              {liked < 0 ? (\r\n                <Heart width=\"2rem\" height=\"2rem\" fill=\"#fff\" />\r\n              ) : (\r\n                <Heart_4 width=\"2rem\" height=\"2rem\" fill=\"#fff\" />\r\n              )}\r\n            </span>\r\n            <span className=\"nol\">{nol.current}</span>\r\n          </div>\r\n          <Link to={`/post/${post._id}`}>\r\n            <div className=\"post__tail__communication__item\">\r\n              <span className=\"icon\">\r\n                <Comment2 width=\"2rem\" height=\"2rem\" fill=\"#fff\" />\r\n              </span>\r\n              <span className=\"nol\">\r\n                {post.comments ? post.comments.length : 0}\r\n              </span>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n        <div className=\"post__tail--time-left\">\r\n          {getLeftTime(post.createdAt)}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default PostItem;\r\n"],"sourceRoot":""}