(this.webpackJsonphello=this.webpackJsonphello||[]).push([[19],{539:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),n=s(46),c=s(47),l=s(48),i=s.n(l),o=s(8),d=s(49),m=s(18),b=s(60),j=s(9),u=s(83),h=s(51),_=s(3),f=function(){var e=Object(u.a)(),t=e.register,s=e.handleSubmit,r=e.errors,n=(e.reset,e.watch),c=Object(h.a)(),l=c.loading,f=(c.error,c.request),O=c.clearError,x=Object(j.c)((function(e){return e.currentUser})),p=Object(j.b)(),v=Object(a.useState)(),N=Object(m.a)(v,2),g=(N[0],N[1],Object(a.useState)(null)),w=Object(m.a)(g,2),k=w[0],y=w[1],P=function(){var e=Object(d.a)(i.a.mark((function e(t){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("http://localhost:5000/api"+"/users/update-info/".concat(x._id),"patch",t,{Authorization:"Bearer "+x.token});case 3:s=e.sent,y(!0),O(),p({type:"USER_DATA_IN",payload:Object(o.a)(Object(o.a)({},s.data),{},{expiration:x.expiration,token:x.token})}),localStorage.setItem("userData2",JSON.stringify(Object(o.a)(Object(o.a)({},s.data),{},{expiration:x.expiration,token:x.token}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),L=n(["name","bio","birth","livesIn","from","gender"]);return x&&x.token?Object(_.jsxs)("div",{className:"settings__block",children:[Object(_.jsxs)("form",{onSubmit:s(P),children:[Object(_.jsxs)("div",{className:"form__control",children:[Object(_.jsxs)("div",{className:"form__unit",children:[Object(_.jsx)("input",{placeholder:" ",type:"text",defaultValue:x.name,name:"name",className:"form__input",ref:t({minLength:6,maxLength:32,required:!0})}),Object(_.jsx)("label",{className:"form__label",children:"Name"})]}),r.name&&Object(_.jsx)("div",{className:"form__error",children:"name must be more than 5 and less than 21 chars"})]}),Object(_.jsxs)("div",{className:"form__control dup",children:[Object(_.jsxs)("div",{className:"form__unit",children:[Object(_.jsx)("input",{placeholder:" ",type:"text",defaultValue:x.about&&x.about.livesIn?x.about.livesIn:null,name:"livesIn",className:"form__input",ref:t({minLength:6,maxLength:32})}),Object(_.jsx)("label",{className:"form__label",children:"Lives In"}),r.livesIn&&Object(_.jsx)("div",{className:"form__error",children:"Invalid input"})]}),Object(_.jsxs)("div",{className:"form__unit",children:[Object(_.jsx)("input",{placeholder:" ",type:"text",name:"from",className:"form__input",ref:t({minLength:6,maxLength:32}),defaultValue:x.about&&x.about.from?x.about.from:null}),Object(_.jsx)("label",{className:"form__label",children:"From"}),r.from&&Object(_.jsx)("div",{className:"form__error",children:"invalid"})]})]}),Object(_.jsx)("div",{className:"form__control",children:Object(_.jsxs)("div",{className:"form__unit",children:[Object(_.jsxs)("select",{placeholder:" ",name:"gender",className:"form__input",ref:t,children:[Object(_.jsx)("option",{value:"",selected:x.about.gender,disabled:!0,hidden:!0}),Object(_.jsx)("option",{value:"male",selected:"male"===x.about.gender,children:"male"}),Object(_.jsx)("option",{value:"female",selected:"female"===x.about.gender,children:"female"})]}),Object(_.jsx)("label",{className:"form__label",children:"Gender"})]})}),Object(_.jsxs)("div",{className:"form__control",children:[Object(_.jsxs)("div",{className:"form__unit",children:[Object(_.jsx)("input",{placeholder:" ",type:"date",name:"birth",className:"form__input",ref:t({validate:function(e){return e.split("-")[0]<=(new Date).getFullYear()}}),defaultValue:x.about&&x.about.birth?x.about.birth:null}),Object(_.jsx)("label",{className:"form__label",children:"Date Of Birth"})]}),r.birth&&Object(_.jsx)("div",{className:"form__error",children:"invalid date"})]}),Object(_.jsxs)("div",{className:"form__control",children:[Object(_.jsxs)("div",{className:"form__unit",children:[Object(_.jsx)("textarea",{placeholder:" ",name:"bio",className:"form__textarea",ref:t({minLength:2,maxLength:32}),defaultValue:x.about&&x.about.bio?x.about.bio:null}),Object(_.jsx)("label",{className:"form__label-area",children:"Bio"})]}),r.bio&&Object(_.jsx)("div",{className:"form__error",children:"bio must be less than 256 chars"})]}),Object(_.jsx)("button",{disabled:l||x.name===L.name&&!L.gender&&!L.birth&&!L.from&&!L.livesIn&&!L.bio,className:"btn btn--contained1-primary mg-none block",children:"save changes"})]}),k&&Object(_.jsx)("h6",{children:"Your information was updated successfully "})]}):Object(_.jsx)(b.a,{})},O=function(){var e=Object(u.a)(),t=e.register,s=e.handleSubmit,r=e.errors,n=e.reset,c=Object(h.a)(),l=c.loading,o=c.error,b=c.request,f=c.clearError,O=Object(a.useState)(null),x=Object(m.a)(O,2),p=x[0],v=x[1],N=Object(a.useState)(null),g=Object(m.a)(N,2),w=g[0],k=g[1],y=Object(j.c)((function(e){return e.currentUser})),P=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("http://localhost:5000/api"+"/users/change-password/".concat(y._id),"patch",t,{Authorization:"Bearer "+y.token});case 3:e.sent,v(!0),f(),n({oldPassword:null,newPassword:null,confirmPassword:null}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{className:"settings__block",children:[Object(_.jsx)("div",{className:"error-message",children:Object(_.jsx)("div",{className:"message",children:o?o||"something went wrong":""})}),Object(_.jsxs)("form",{onSubmit:s(P),children:[Object(_.jsxs)("div",{className:"form__control",children:[Object(_.jsxs)("div",{className:"form__unit",children:[Object(_.jsx)("input",{placeholder:" ",type:"password",name:"oldPassword",className:"form__input",ref:t({required:!0,minLength:6,maxLength:32})}),Object(_.jsx)("label",{className:"form__label",children:"Old Password"})]}),r.oldPassword&&Object(_.jsx)("div",{className:"form__error",children:"Password must be more then 5 characters and less than 33"})]}),Object(_.jsxs)("div",{className:"form__control",children:[Object(_.jsxs)("div",{className:"form__unit",children:[Object(_.jsx)("input",{placeholder:" ",onChange:function(e){k(e.target.value)},type:"password",name:"newPassword",className:"form__input",ref:t({required:!0,minLength:6,maxLength:32})}),Object(_.jsx)("label",{className:"form__label",children:"New Password"})]}),r.newPassword&&Object(_.jsx)("div",{className:"form__error",children:"Password must be more then 5 characters and less than 33"})]}),Object(_.jsxs)("div",{className:"form__control",children:[Object(_.jsxs)("div",{className:"form__unit",children:[Object(_.jsx)("input",{placeholder:" ",type:"password",name:"confirmPassword",className:"form__input",ref:t({required:!0,minLength:6,validate:function(e){return e===w}})}),Object(_.jsx)("label",{className:"form__label",children:"Confirm Password"})]}),r.confirmPassword&&Object(_.jsx)("div",{className:"form__error",children:"the confirmd password is diffrent from the new password"})]}),Object(_.jsx)("button",{className:"btn btn--contained1-primary mg-none block",disabled:l,children:l?"updating password...":"save changes"})]}),p&&Object(_.jsx)("h6",{children:"Your password was updated successfully "})]})},x=r.a.memo((function(){return Object(a.useEffect)((function(){document.title="Settings"}),[]),Object(_.jsxs)("div",{className:"settings",children:[Object(_.jsx)("div",{className:"settings__nav",children:Object(_.jsxs)("ui",{className:"settings__nav__list",children:[Object(_.jsx)("li",{className:"settings__nav__item",children:Object(_.jsx)(n.b,{className:"settings__nav__link",to:"/settings/account",activeClassName:"active",children:"Account"})}),Object(_.jsx)("li",{className:"settings__nav__item",children:Object(_.jsx)(n.b,{className:"settings__nav__link",to:"/settings/password",activeClassName:"active",children:"Password"})})]})}),Object(_.jsxs)("div",{children:[Object(_.jsx)(c.a,{exact:!0,from:"/settings",to:"/settings/account"}),Object(_.jsx)(c.b,{exact:!0,path:"/settings/account",component:f}),Object(_.jsx)(c.b,{exact:!0,path:"/settings/password",component:O})]})]})}));t.default=x}}]);
//# sourceMappingURL=19.07478e74.chunk.js.map